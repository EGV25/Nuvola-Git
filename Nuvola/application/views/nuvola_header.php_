
<?php

$URI1 = 1; //1
$URI2 = 2;
$URI3 = 3;


$order_fecha = $_COOKIE['order_fecha'];

if (!isset($_SESSION['header_startDate']) || $_SESSION['header_startDate'] == "") {
  $_SESSION["header_startDate"] = date("m/d/Y");
}

if (!isset($_SESSION['header_endDate']) || $_SESSION['header_endDate'] == "") {
  $_SESSION["header_endDate"] = date("m/d/Y");
}



$this->session->set_userdata(array("angel_update" => $menu_1['menu_22_3'],
    "angel_create"=>$menu_1['menu_22_2']));
  #Se carga este helper aqui para usarlo en todas las vistas
  $this->load->helper('functions'); 


$date_global = (isset($_COOKIE['date_global']) and $_COOKIE['date_global'] != "")? $_COOKIE['date_global'] : "0";
if ($date_global != '0' and $date_global != '-1' and  $date_global != '-2') {
    $date_global2 = explode('-', $date_global);
    $date_global = $date_global2[1] . '/' . $date_global2[2] . '/' . $date_global2[0];
} else {
    $date_global = '';
}
  $_SESSION['can'] = "SI";
  if(!isset($menu_1))
  {
    for($i=1;$i<=24;$i++)
    {
      $menu_1['menu_'.$i.'_1']='';
    }
    $menu_1['menu_1_2']='';
  }
  $is_admin=$this->session->userdata('super_admin');
  $url=explode('/',$_SERVER['REQUEST_URI']);
  $module=$url[$URI2];
  /*Delete End*/
  ?>
  <!DOCTYPE html>
  <html lang="en">
  <head>
    <script>
     // window.location.hash="no-back-button";
     // window.location.hash="Again-No-back-button";//again because google chrome don't insert first hash into history
      //window.onhashchange=function(){window.location.hash="no-back-button";}
    </script>

   <meta charset="UTF-8" >
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">
    <title>Nuvola | Guest Service Management</title>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700' rel='stylesheet' type='text/css'>
    <!-- Bootstrap core CSS -->
    <link href="<?php echo base_url('styles/css/bootstrap.min.css') ?>" rel="stylesheet">
    <link href="<?php echo base_url('styles/css/font-awesome/css/font-awesome.min.css') ?>" rel="stylesheet">
    <link href="<?php echo base_url('styles/css/simple-sidebar.css') ?>" rel="stylesheet">
    <!-- Custom styles for this template -->
    <link href="<?php echo base_url('styles/css/customNUVOLA.css') ?>" rel="stylesheet">
    <link href="<?php echo base_url('styles/css/developer.css') ?>" rel="stylesheet">
    <link href="<?php echo base_url('styles/js/jquery.smartmenus.bootstrap.css') ?>" rel="stylesheet">
    <script src="<?php echo base_url('styles/js/jquery/1.11.1/jquery_min.js') ?>"></script>
    <script src="<?php echo base_url('styles/js/jquery-ui.js') ?>"></script>
    <script src="<?php echo base_url('styles/js/highlight.pack.js') ?>"></script>
    <script src="<?php echo base_url('styles/js/jquery.tutorialize.sec.js') ?>"></script>
    <!--<script src="<?php //echo base_url('styles/js/nuvola_custom.js') ?>"></script>-->
    <link href="<?php echo base_url('styles/css/jquery-ui.min.css') ?>" rel="stylesheet">
    <link href="<?php echo base_url('styles/css/tutorialize.css') ?>" rel="stylesheet">
    <!--colorpicker-->
    <link href="<?php echo base_url('styles/css/colorpicker/evol.colorpicker.min.css') ?>" rel="stylesheet">
    <script type="text/javascript" src="<?php echo base_url('styles/js/colorpicker/evol.colorpicker.min.js') ?>"></script>
    
    <!-- Import Notificacion Chrome -->
    <script src="<?php echo base_url('styles/js/webnotifications.js') ?>"></script>
    <!-- colorpicker-->
    <!--Vertical Center Modal Script-->
    <!--tooltipster-->
    <link rel="stylesheet" type="text/css" href="<?php echo base_url('styles/css/tooltipster-dark.css') ?>">
     <link rel="stylesheet" type="text/css" href="<?php echo base_url('styles/css/tooltipster-light.css') ?>">
     
     <link rel="stylesheet" type="text/css" href="<?php echo base_url('styles/css/tooltipster.css') ?>">
       <script type="text/javascript" src= "<?php echo base_url('styles/js/jquery.tooltipster.min.js')?>"></script>
     <!-- <script type="text/javascript" src= "<?php echo base_url('styles/js/jquery.textcomplete.min.js')?>"></script>
      <script type="text/javascript" src= "<?php echo base_url('styles/js/Clamp.js')?>"></script> -->
    <script type="text/javascript">
 
    function refreshCode()
    {
     $("body").click(function(e){
      if(e.target.id != 'btn_save')
      {
        $('#txt_check_access_code').val('');
      }
    });
   }
   function centerModal() {
     $('.modal').each(function(){
      if($(this).hasClass('in') == false){
        $(this).show();
      };
      var contentHeight = $(window).height() - -31;
      var headerHeight = $(this).find('.modal-header').outerHeight() || 2;
      var footerHeight = $(this).find('.modal-footer').outerHeight() || 2;
      $(this).find('.modal-content').css({
        'max-height': function () {
          return contentHeight;
        }
      });
      $(this).find('.modal-body').css({
        'max-height': function () {
          return (contentHeight - (headerHeight + footerHeight));
        }
      });
      $(this).find('.modal-dialog').css({
        'margin-top': function () {
          return -($(this).outerHeight() / 2);
        },
        'margin-left': function () {
          return -($(this).outerWidth() / 2);
        }
      });
      if($(this).hasClass('in') == false){
        $(this).hide();
      };
    });
          // Center modal vertically in window
        }
        
        $('.modal').on('show.bs.modal', centerModal);

        $(window).on("load", function (e) {
          
          $('#access_code_check').submit( function() {
 
            val=$('#txt_check_access_code').val();
            
            if($('#access_menu_type').val() == '1') { 
              reset('dashboard'); 
            }
            
            if(val == '') {
              error_message("<?php echo Lang('invalid_access_code');?>");
              return false;
            }

            save_access();
            $('#txt_check_access_code').focus();
            return false;
          
          });
 
          $('#access-modal').modal('hide').on('shown.bs.modal', function (){
            $('#txt_check_access_code').focus();
          });

          var $t = $(this),
          target = $t[0].href || $t.data("target") || $t.parents('.modal') || [];
          $(target)
          .find("input,textarea,select")
          .val('')
          .end()
          .find("input[type=checkbox], input[type=radio]")
          .prop("checked", "")
          .end();
          centerModal();
          refreshCode();
          $('.modal:visible').each(centerModal);
        });
  $(window).on("resize", function () {
    $('.modal:visible').each(centerModal);
    $('#access-modal').each(centerModal);
  });
  </script>
  <script type="text/javascript">
 
  $(function(){
    $('<audio id="chatAudio"><source src="<?php echo base_url();?>/styles/notify/notify.ogg" type="audio/ogg"><source src="<?php echo base_url();?>/styles/notify/notify.mp3" type="audio/mpeg"><source src="<?php echo base_url();?>/styles/notify/notify.wav" type="audio/wav"></audio>').appendTo('body');
    $('#btn_dept_save1').click(function()
    {
      txt_guest_id=$("#eve_guest_id").val();
      txt_room_id=$("#room_id").val();
      txt_issue=$("#txt_issue").val();
      txt_arr= $("#txt_arr").val();
      txt_dep=$("#txt_dep").val();
      label_room_id=$("#room_name").val();
      label_guest_id=$("#guest_name").val();
      document.cookie ='txt_room_id='+txt_room_id;
      document.cookie ='txt_guest_id='+txt_guest_id;
      document.cookie ='txt_issue='+txt_issue;
      document.cookie ='txt_arr='+txt_arr;
      document.cookie ='txt_dep='+txt_dep;
      document.cookie ='label_room_id='+label_room_id;
      document.cookie ='label_guest_id='+label_guest_id;
      var n = $('input:checked').length;
      access_code=$('#access_code1').val();
      if(access_code!='')
      {
        var String = 'code='+ access_code;
        $.ajax({
          type: "POST",
          url: '<?php echo base_url(); ?>index.php/chkUserId',
          data: String,
          cache: false,
          success: function(result){
            if(result==''){
             if(n > 0)
             {
               status='yes';
               document.cookie ='newDept='+status;
               $('#addDept1').submit();
             }
             else
             {
              $('#err_tag_list').html('please select any one');
            }
          }else{
            $('.checkAccesscode').html('<img src="<?php echo base_url('styles/images/error.png');?>" /> This Invalid Access Code');
            $(".checkAccesscode").removeClass("green");
            $('.checkAccesscode').addClass("red");
            return false;
          }
        }
      });
      }
      else
      {
        $('#access_div1').addclass("has-error");
        return false;
      }
    });
  $("#all-events").click(function(){
    $('#dept_menu').toggle();
  });
  $('.dept_select_li').click(function()
  {
    $('.dropdown-menu').show();
  });
  $('.dept_select').click(function(event)
  {
    hotel_menu= $(this).html();
    $(".drop-text").html(hotel_menu);
  });
  $("#hotel_select li a").mouseover(function(){
   hotel_menu= $(this).html();
   key=$(this).attr('id');
   $("#hotel_selected").val(key);

 });
  $('.hotel_select').click(function()
  {
   
    hotel_menu= $(this).html();
    $('#hotel_select').hide();
    $(".drop-hotel-text").html(hotel_menu);
  });
  $('#email_txt').keyup(function()
  {
  });
  $("#every_days").keypress(function (e) {
       //if the letter is not digit then display error and don't type anything
       if (e.which != 8 && e.which != 0 && (e.which < 48 || e.which > 57)) {
          //display error message
          return false;
        }
      });
  $('#txt_tag_name1').keyup(function()
  {
    $("#msg_span1").hide();
    $('.tagcheck').hide();
    var tag_name=$(this).val();
    var availname=remove_whitespaces(tag_name);
    if(availname!=''){
      $('.tagcheck').show();
      $('.tagcheck').fadeIn(400).html('<img src="<?php echo base_url('styles/images/ajax-loading.gif');?>" /> ');
      var String = 'tagname='+ availname;
      $.ajax({
        type: "POST",
        url: '<?php echo base_url(); ?>index.php/chkExistTag',
        data: String,
        cache: false,
        success: function(result){
          var result=remove_whitespaces(result);
          if(result==''){
            $('.tagcheck').html('<img src="<?php echo base_url('styles/images/accept.png'); ?>" />');
            $(".tagcheck").removeClass("red");
            $('.tagcheck').addClass("green");
            $("#txt_prev_name").removeClass("yellow");
            $("#txt_prev_name").addClass("white");
            $('#btn_save1').attr('disabled',false);
          }else{
            $('.tagcheck').html('<img src="<?php echo base_url('styles/images/error.png');?>" /> This Tag Name Is Already Exists');
            $(".tagcheck").removeClass("green");
            $('.tagcheck').addClass("red")
            $("#txt_prev_name").removeClass("white");
            $("#txt_prev_name").addClass("yellow");
            $('#btn_save1').attr('disabled',true);
            return false;
          }
        }
      });
}
});
  $("#txt_check_access_code").keydown(function (e) {
          // Allow: backspace, delete, tab, escape, enter and .
          if ($.inArray(e.keyCode, [46, 8, 9, 27, 13, 110, 190]) !== -1 ||
               // Allow: Ctrl+A
               (e.keyCode == 65 && e.ctrlKey === true) ||
               // Allow: home, end, left, right, down, up
               (e.keyCode >= 35 && e.keyCode <= 40)) {
                   // let it happen, don't do anything
                 return;
               }
          // Ensure that it is a number and stop the keypress
          if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {
            e.preventDefault();
          }
        });
  $('#txt_dept_name1').keyup(function()
  {
    var dept_name=$(this).val();
    var availname=remove_whitespaces(dept_name);
    if(availname!=''){
      $('.check').show();
      $('.check').fadeIn(400).html('<img src="<?php echo base_url('styles/images/ajax-loading.gif');?>" /> ');
      var String = 'deptname='+ availname;
      $.ajax({
        type: "POST",
        url: '<?php echo base_url(); ?>index.php/chkExistDept',
        data: String,
        cache: false,
        success: function(result){
          var result=remove_whitespaces(result);
          if(result==''){
           $('#btn_dept_save1').attr('disabled',false);
           $('.check').html('<img src="<?php echo base_url('styles/images/accept.png'); ?>" />');
           $(".check").removeClass("red");
           $('.check').addClass("green");
           $("#txt_prev_name").removeClass("yellow");
           $("#txt_prev_name").addClass("white");
         }else{
          $('#btn_dept_save1').attr('disabled',true);
          $('.check').html('<img src="<?php echo base_url('styles/images/error.png');?>" /> This Department Name Is Already Exists');
          $(".check").removeClass("green");
          $('.check').addClass("red")
          $("#txt_prev_name").removeClass("white");
          $("#txt_prev_name").addClass("yellow");
          return false;
        }
      }
    });
}
});
});


    /*Script Refresh*/
    function refresh_count(num_pending, num_completed, num_closed) {
            var fecha = fecha_actual;


             pending_num = num_pending;
             completed_num = num_completed;
             closed_num = num_closed;
            

            var parametros = {
              'fecha_actual_app' : fecha
            };


            $.ajax({
                data:  parametros,
                url: 'ajax_notification',
                type: 'post',
                dataType: 'json',
                success: function (response) {

                  

                  //alert("Pending Nuevo: "+response[0]['pending']+" --- Pending Actual: "+pending_num);
                  if(parseInt(response[0]['pending']) > parseInt(pending_num)){
                    //alert("entro crear");
                    num = parseInt(response[0]['pending']);

                    if(num==1){
                        showNotification(num+'<?php echo " ".Lang("eventcreted");?>');  
                      //showNotification(num+' Evento Creado');  
                    }else{
                        showNotification(num+'<?php echo " ".Lang("eventcreteds");?>');  

                      //showNotification(num+' Eventos Creados');  
                    }
                    pending_num = response[0]['pending'];
                  }

                  if(parseInt(response[1]['completed']) > parseInt(completed_num)){
                    //alert("entro cerrar");
                    num = parseInt(response[1]['completed']);

                    if(num==1){
                      showNotification(num+'<?php echo " ".Lang("eventcompleted");?>');  

                      //showNotification(num+' Evento Completado');  
                    }else{
                      showNotification(num+'<?php echo " ".Lang("eventcompleteds");?>');  

                      //showNotification(num+' Eventos Completados');  
                    }
                    
                    completed_num = response[1]['completed'];
                    
                  }

                  if(parseInt(response[2]['closed']) > parseInt(closed_num)){
                    //alert("entro");
                    num = parseInt(response[2]['closed']);

                    if(num==1){
                      showNotification(num+'<?php echo " ".Lang("eventclosed");?>');  

                      //showNotification(num+' Evento Cerrado');  
                    }else{
                        showNotification(num+'<?php echo " ".Lang("eventcloseds");?>'); 
                      //showNotification(num+' Eventos Cerrados');  
                    }
                    closed_num = response[2]['closed'];
                    
                  }

                  var sum_general = parseInt(pending_num) + parseInt(completed_num) + parseInt(closed_num);

                  
                    //Prueba
                  
                  if(parseInt(sum_general)>0){ 
                    
                    document.cookie = "events_news="+response[3]['id_events'];
                    if(parseInt(sum_general)==1){
                      $("#refresh_count_updates").html('<div style="font-size: 10px;font-weight: 700;text-transform: uppercase;background-color: #f98631;padding: 2px 10px;-webkit-border-radius: 100px;-moz-border-radius: 100px;border-radius: 100px;margin-left: 10px; cursor:pointer" onclick="refresh_dashboard()">1 <?php echo Lang("New Update");?></div>');  
                    }else{
                      $("#refresh_count_updates").html('<div style="font-size: 10px;font-weight: 700;text-transform: uppercase;background-color: #f98631;padding: 2px 10px;-webkit-border-radius: 100px;-moz-border-radius: 100px;border-radius: 100px;margin-left: 10px; cursor:pointer"  onclick="refresh_dashboard()">'+parseInt(sum_general)+'<?php echo " ".Lang("New Updates");?></div>'); 
                    }
                    //$("#refresh_count_updates").submit("dashboard");
                  }


            
                //  setTimeout('refresh_count(pending_num,completed_num,closed_num)',60000);
                setTimeout(function() { refresh_count(pending_num, completed_num, closed_num); }, 180000);
                    
                                  },
                /*error: function (response) {
                    alert('error php');
                }*/

                
            });

      
 
    }

    function refresh_dashboard () {
      
      window.location = " <?php echo base_url('index.php/dashboard') ?> ";
      
    } 


    var n = 1;
    function showNotification(texto_cuerpo) {
        var notif = showWebNotification('Nuvola', texto_cuerpo, "<?php echo base_url().'/images/nuvola_notify.png' ?>", null, 5000);
        //handle different events
        if(notif){
          notif.addEventListener("show", Notification_OnEvent);
          notif.addEventListener("click", Notification_OnEvent);
          notif.addEventListener("close", Notification_OnEvent);  
        }
        
        //n++;
    }
    function Notification_OnEvent(event) {
        //A reference to the Notification object
        var notif = event.currentTarget;
    }



  $(document).ready(function()
  {
 
    fecha_actual = "<?php echo date('Y-m-d H:i:s') ?>";
    //alert(fecha_actual);
    /*Function Refresh New Events*/
   
    refresh_count(0,0,0);
   
    var msg='<?php echo (isset($_SESSION['msg']) &&!empty($_SESSION['msg']))?$_SESSION['msg']:'';?>';
    var msg='<?php echo (isset($_SESSION['msg']) &&!empty($_SESSION['msg']))?$_SESSION['msg']:'';?>';
    /* */
    if(msg != '')
    {
      error_message('<?php echo $_SESSION['msg']?>');
      '<?php $_SESSION['msg'] =''; ?>';
      msg='';
    }
    $('.odd').click(function(e){
    });
    /*AutoComplete*/

    var room_list=JSON.parse('<?php echo stripslashes(json_encode($guest_arr[1],JSON_UNESCAPED_UNICODE)); ?>');

   
    function split(val) {
      return val.split(/,\s*/);
    }
    function extractLast(term) {
      return split(term).pop();
    }
    $( "#room_name" ).autocomplete({
      minLength: 0,
      appendTo: '#sidebar-wrapper',
      source: function(request, response) {
                  // delegate back to autocomplete, but extract the last term
                  response($.ui.autocomplete.filter(room_list, extractLast(request.term)));
                  if(request.term == ""){
                    response(false);
                  }
                },
                select: function( event, ui ) {
                  $( "#room_name" ).val(ui.item.label );
                  $( "#room_id" ).val( ui.item.room_id );
                  return false;
                },
                autoFocus: true,
                minLength: 0
              });
    var guest_list=JSON.parse('<?php echo stripslashes(json_encode($guest_arr[2],JSON_UNESCAPED_UNICODE)); ?>');
    $( "#guest_name" ).autocomplete({
      minLength: 0,
      appendTo: '#sidebar-wrapper',
      source: function(request, response) {
                  // delegate back to autocomplete, but extract the last term
                  response($.ui.autocomplete.filter(guest_list, extractLast(request.term)));
                  if(request.term == ""){
                   $('#txt_arr').val('');
                   $('#txt_dep').val('');
                   $('#guest_id').val('');
                   response(false);
                 }
               },
               select: function( event, ui ) {
                 $('#txt_arr').val(ui.item.checkIn);
                 $('#txt_dep').val(ui.item.checkOut);
                 $("#txt_arr").data("DateTimePicker").setDate($("#txt_arr").val());
                 $("#txt_dep").data("DateTimePicker").setDate($("#txt_dep").val());
                 $("#txt_arr").data("DateTimePicker").setMaxDate($("#txt_dep").val());
                 $("#guest_name").val(ui.item.label);
                 $('#guest_id').val(ui.item.userId);
                 return false;
               },
              // autoFocus: true,
               minLength: 0
             });
    
    var staff_list1=JSON.parse('<?php echo stripslashes(json_encode($guest_arr[4],JSON_UNESCAPED_UNICODE)); ?>');
    $( "#owner_name" ).autocomplete({
      minLength: 0,
      appendTo: '#sidebar-wrapper',
      source: function(request, response) {
                    // delegate back to autocomplete, but extract the last term
                    response($.ui.autocomplete.filter(staff_list1, extractLast(request.term)));
                    if(request.term == ""){
                      $('#owner_id').val('');
                      response(false);
                    }
                  },
                  select: function( event, ui ) {
                    $('#owner_id').val(ui.item.userId);
                    $('#owner_name').val(ui.item.label);
                    return false;
                  },
                  autoFocus: true,
                  minLength: 0
                });
  //ENTER
   $('#room_assign_auto').autocomplete({
            source: function (request, response) {
                $.ajax({
                    url: 'roomsAutoComplete2',
                    dataType: "json",
                    data: {
                        key: request.term,
                        type: 'search_room',
                        },
                    success: function (data) {
                      //alert('ddd');
                    if(request.term == ""){
                      response(false);
                    }
                    else{
                      
                        response($.map(data, function (item) {
                            return {
                                label: $.isNumeric(item.location)?"<?php echo Lang('Room');?>"+' '+item.location:item.location,
                                value: $.isNumeric(item.location)?"<?php echo Lang('Room');?>"+' '+item.location:item.location,
                                roomId : item.room_id
                            }
                        }));
                    }
                  }
                });
            },
            select: function (event, ui) {
                $('#room_assign_1').val(ui.item.roomId);
               // $('#room_no2').val(ui.item.roomId);
            },
            //autoFocus: true,
            autoSelectFirst: true,
            minLength: 1,
            delay: 300,
        });
  $( "#owner_name_change" ).autocomplete({
    minLength: 0,
        scroll: true,
    //appendTo: '#sidebar-wrapper',
    source: function(request, response) {
                  // delegate back to autocomplete, but extract the last term
                  response($.ui.autocomplete.filter(staff_list1, extractLast(request.term)));
                  if(request.term == ""){
                    $('#owner_id_change').val('');
                    response(false);
                  }
                },

                select: function( event, ui ) {
                  $('#owner_id_change').val(ui.item.userId);
                  $('#owner_name_change').val(ui.item.label);
 /*
                  if ($('#owner_id_change').val() != "") {
                    return funUserOwn();
                  } else {

                  }*/
                   return false;
                },
                autoFocus: true,
                minLength: 0
              });
  var dept_list=JSON.parse('<?php echo stripslashes(json_encode($guest_arr[3],JSON_UNESCAPED_UNICODE)); ?>');

  $("#department_tag" ).autocomplete({
    minLength: 2,
    appendTo: '#sidebar-wrapper',
    source: function(request, response) {
                  // delegate back to autocomplete, but extract the last term
                  response($.ui.autocomplete.filter(dept_list, extractLast(request.term)));
                  response.setEncoding('utf-8');

                  if(request.term == ""){
                    $('#txt_dept_id').val('');
                    response(false);
                  }

                },
                select: function( event, ui ) {
                 $('#txt_dept_id').val(ui.item.userId);
                 $('#department_tag').val(ui.item.label.replace("&#39;","'"));
                 return false;
               },
               autoFocus: true,
               minLength: 0
             });

  $('#header_search_guest').autocomplete({

    appendTo: '#sidebar-wrapper',
    source: function (request, response) {
      $.ajax({
        url: 'getGuestList',
        dataType: "json",
        data: {
          key: request.term,
          type: 'search_guest'
        },
        success: function (data) {
          if (jQuery.isEmptyObject(data)) {
          }
          if(request.term == ""){
            response(false);
          }
          else{
            response($.map(data, function (item) {
              return {
                label: item.guest_name + ' ' + item.phone_no + '',
                value: $.trim(item.guest_name),
                guestId: item.guest_id,
                phoneNo: item.phone_no,
                location: item.location
              }
            }));
          }
        }
      });
    },
    select: function (event, ui) {
    },
    autoFocus: false,
    minLength: 0
  });
    //get user results
    $('#header_search_user').autocomplete({
      appendTo: '#sidebar-wrapper',
      source: function (request, response) {
        $.ajax({
          url: 'getGuestList',
          dataType: "json",
          data: {
          key: request.term,
          type: 'search_user'
          },
          success: function (data) {
            if (jQuery.isEmptyObject(data)) {
            }
            if(request.term == ""){
              response(false);
            }
            else{
              response($.map(data, function (item) {
                return {
                  label: item.staff_name,
                  value: item.staff_name,
                  userId: item.staff_id
                }
              }));
            }
          }
        });
      },
      select: function (event, ui) {
      },
      autoFocus: false,
      minLength: 0
    });
    var prev_user_id='';
    $('.txt_issue').keyup(function(){
      keyword=$(this).html();
      key_res=keyword.search("@");
      console.log(keyword);
      if($.trim(key_res) != -1)
      {
        $( ".txt_issue" ).autocomplete({
          appendTo: '#sidebar-wrapper',
          minLength: 3,
          source: function(request, response) {
           var data_user=request.term.split("@");
           console.log(data_user[1]);
                  // delegate back to autocomplete, but extract the last term
                  response($.ui.autocomplete.filter(staff_list1, extractLast(data_user[1])));
                  if(data_user[1] == ""){
                    response(false);
                  }
                },
                select: function( event, ui ) {
                 event.preventDefault();
                 text=$('.txt_issue').html();
                 text_res=text.split("@");
                 $('.txt_issue').html(text_res[0]+" ");
                 $('.txt_issue').append( "<a href='#' class='token' id='tag_"+ui.item.userId+"' contenteditable='false'><span style='color: #143f6c;'>((((</span><span>"+ ui.item.label+"</span><span style='color: #143f6c;'>)</span><span class='token-x' href='#' onclick='remove_issue_tag("+ui.item.userId+")'>&#120;</span></a><span class='nbsp'>&nbsp;&nbsp;</span>");
                  placeCaretAtEnd($('.txt_issue').get(0));
                  return false;
                },
                focus: function(event, ui) {
                  return false;
                },
                autoFocus: false,
                minLength: 0
              });

}
});
  /*AutoComplete*/
  set_status= "<?php echo (set_value('txt_status'))?set_value('txt_status'):"" ?>";
  set_priority= "<?php echo (set_value('txt_priority'))?set_value('txt_priority'):"" ?>";
  if(set_priority == 1)
  {
    $('#btnpriorityhigh').addClass('stateActive');
    $('#btnprioritymedium').removeClass('stateActive');
    $('#btnprioritylow').removeClass('stateActive');
  }
  else  if(set_priority == 2)
  {
    $('#btnprioritymedium').addClass('stateActive');
    $('#btnpriorityhigh').removeClass('stateActive');
    $('#btnprioritylow').removeClass('stateActive');
  }
  else if(set_priority == 3)
  {
    $('#btnprioritylow').addClass('stateActive');
    $('#btnprioritymedium').removeClass('stateActive');
    $('#btnpriorityhigh').removeClass('stateActive');
  }
  if(set_status == 1)
  {
    $('#label-primary').removeClass('label-default');
    $('#label-primary').addClass('label-primary');
    $('#label-success').addClass('label-default');
    $('#label-danger').addClass('label-default');
    $('#label-success').removeClass('label-success');
    $('#label-danger').removeClass('label-danger');
  }
  else  if(set_status == 2)
  {
    $('#label-success').removeClass('label-default');
    $('#label-success').addClass('label-success');
    $('#label-primary').addClass('label-default');
    $('#label-danger').addClass('label-default');
    $('#label-primary').removeClass('label-primary');
    $('#label-danger').removeClass('label-danger');
  }
  else if(set_status == 3)
  {
    $('#label-danger').removeClass('label-default');
    $('#label-danger').addClass('label-danger');
    $('#label-primary').addClass('label-default');
    $('#label-success').addClass('label-default');
    $('#label-success').removeClass('label-success');
    $('#label-primary').removeClass('label-primary');
  }
  document.cookie = "master_from_date=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
  document.cookie = "master_to_date=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
  i_alert_check="<?php echo isset($_COOKIE['i_alert'])?$_COOKIE['i_alert']:''?>";
  $('.master_date').datetimepicker({
    pickTime: false,
  });
  var i;
  $(".master_datse").on("dp.change",function (e) {
    header=$('#menu_header').val();
    if(header == 'dashboard')
    {
    }
    else
    {
      master_date=$("#header_date").val();
      document.cookie ='eventdate_val='+master_date;
      window.reload();
    }


  });
  $('#master_from_date').datetimepicker({
    pickTime: false
  });
  $("#master_from_date").on("dp.change",function (e) {
    master_from_date=$("#header_from_date").val();


    master_from_date=$("#header_from_date").val();
    master_to_date=$("#header_to_date").val();
    $("#master_to_date").data("DateTimePicker").setDate($("#master_from_date").val());
  });
  $('#master_to_date').datetimepicker({
    pickTime: false
  });
  $("#master_to_date").on("dp.change",function (e) {
    master_from_date=$("#header_from_date").val();
    master_to_date=$("#header_to_date").val();
    if(master_from_date !='' && master_to_date != '' )
    {
      if(master_to_date >= master_from_date)
      {
        document.cookie ='master_from_date='+master_from_date;
        document.cookie ='master_to_date='+master_to_date;
        $('#header_from_date').val('');
        $('#header_to_date').val('');
        $('#packages').submit();
        $('#lostFound').submit();
      }
      else
      {
       alert("To date is not greater than from date");
       return false;
     }
   }
   i=2;
 });
  curr_date="<?php echo date('m/d/Y') ?>";
  curr_date_time_js="<?php echo date('m/d/Y H:i A') ?>";
  today_date="<?php echo date('m/d/Y') ?>";
  //today_time="<?php echo date('H:i A') ?>";
  today_time="<?php echo date('h:i A') ?>";
  var datetmp= new Date();
  var datelimit = new Date( "12/31/"+(datetmp.getFullYear()+1));
  $("#txt_date").on("change.dp",function (e)
  {
   txt_date=$(this).val();
   if(today_date == txt_date)
   {
    curr_time="<?php echo date('H:i A') ?>";
    $("#txt_time").data("DateTimePicker").setMinDate(today_time);
  }
  else
  {
    curr_time='';
    $("#txt_time").data("DateTimePicker").setMinDate(curr_time);
  }
});
  curr_date_time=$('#set_date_time').val();
  var dateToday = new Date();
  $('#txt_date').datetimepicker(
  {
       // container: '.input-group side-bar-ad',
       pickTime: false,
       minDate : dateToday,
       maxDate : datelimit,
      defaultDate:curr_date
     });
  $('#rec-events').hide();
  $('#to_date').datetimepicker(
  {
    pickTime: false,
    defaultDate:curr_date
  });
  $('#from_date').datetimepicker(
  {
    pickTime: false,
    defaultDate:curr_date
  });
  $('#remainder_txt_date').datetimepicker({
   pickTime: false,
   minDate : dateToday,
    maxDate : datelimit,
   defaultDate:curr_date
 });
  $('#remainder_txt_time').datetimepicker(
  {
    pickDate: false,
    dateFormat:'mm/dd/yy',
    minDate : today_time,
    defaultDate:today_time
  });
  $('#txt_time').datetimepicker(
  {
    pickDate: false,
    dateFormat:'mm/dd/yy',
    minDate : today_time,
    defaultDate:today_time
  });
  document.cookie = "newDept=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
  document.cookie = "txt_guest_id=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
  document.cookie = "txt_room_id=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
  document.cookie = "txt_dep=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
  document.cookie = "txt_arr=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
  document.cookie = "txt_issue=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
  document.cookie = "txt_issue=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
  document.cookie = "label_room_id=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
  document.cookie = "label_guest_id=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
  $("#txt_contact").on("click", function(){
    check = $("#txt_contact").is(":checked");
    if(check) {
     $('#txt_contact').val('1');
   } else {
    $('#txt_contact').val('0');
  }
});

  $('#header_date').datetimepicker(
  {
    pickTime: false,
    minDate: '<?php echo date("m/d/Y",strtotime($this->session->userdata("hotel_created")))?>',
    maxDate: '<?php echo date("m/d/Y") ?>'

  });


  $('#master_startDate').datetimepicker(
  {
    pickTime: false,
    minDate: '<?php echo date("m/d/Y",strtotime($this->session->userdata("hotel_created")))?>',
    maxDate: '<?php echo date("m/d/Y") ?>'

  });

  $('#master_endDate').datetimepicker(
  {
    pickTime: false,

    maxDate:'<?php echo date("m/d/Y") ?>',
    minDate: '<?php echo date("m/d/Y",strtotime($this->session->userdata("hotel_created")))?>'

  });
  $("#master_startDate").on("change.dp",function (e)
  {

    $("#master_endDate").data("DateTimePicker").setMinDate($("#header_startDate").val());
    start_date = Date.parse($("#header_startDate").val());
    end_date = Date.parse($("#header_endDate").val());
    if(start_date > end_date)
    {
      $("#header_endDate").data("DateTimePicker").setDate($("#header_startDate").val());
    }
    if(document.getElementById("show_today_data")){
      $("#show_today_data").html("");
    }
  });
  $("#adv_opt").on("click",function (e)
  {
        //$('#label-danger').focus();
        $("#adv_arrow").toggleClass('glyphicon-chevron-up glyphicon-chevron-down');
      });
  $("#master_endDate").on("change.dp",function (e)
  {
    $("#master_startDate").data("DateTimePicker").setMaxDate($("#header_endDate").val());
    start_date = Date.parse($("#header_startDate").val());
    end_date = Date.parse($("#header_endDate").val());
    if(start_date > end_date)
    {
      $("#header_startDate").data("DateTimePicker").setDate($("#header_endDate").val());
    }
    if(document.getElementById("show_today_data")){
      $("#show_today_data").html("");
    }
  });
  $("#btn_clos").click(function(e){
   $('.token-x').html('x');
   //history.back(); //EDUARDO
 });
});
  function placeCaretAtEnd(el) {
    el.focus();
    if (typeof window.getSelection != "undefined"
      && typeof document.createRange != "undefined") {
      var range = document.createRange();
    range.selectNodeContents(el);
    range.collapse(false);
    var sel = window.getSelection();
    sel.removeAllRanges();
    sel.addRange(range);
  } else if (typeof document.body.createTextRange != "undefined") {
    var textRange = document.body.createTextRange();
    textRange.moveToElementText(el);
    textRange.collapse(false);
    textRange.select();
  }
}
function remove_issue_tag(tag_id)
{
  $('.txt_issue').find('#tag_'+tag_id).remove();
}
function setEndOfContenteditable(contentEditableElement)
{
  var range,selection;
      if(document.createRange)//Firefox, Chrome, Opera, Safari, IE 9+
      {
          range = document.createRange();//Create a range (a range is a like the selection but invisible)
          range.selectNodeContents(contentEditableElement);//Select the entire contents of the element with the range
          range.collapse(false);//collapse the range to the end point. false means collapse to end rather than the start
          selection = window.getSelection();//get the selection object (allows you to change selection)
          selection.removeAllRanges();//remove any selections already made
          selection.addRange(range);//make the range you have just created the visible selection
        }
      else if(document.selection)//IE 8 and lower
      {
          range = document.body.createTextRange();//Create a range (a range is a like the selection but invisible)
          range.moveToElementText(contentEditableElement);//Select the entire contents of the element with the range
          range.collapse(false);//collapse the range to the end point. false means collapse to end rather than the start
          range.select();//Select the range (make it the visible selection
        }
      }
      function setPriority(val)
      {
       if(val == 3)
       {
        $("#label-danger").attr('class', 'in-btn-default-low-select');
        $("#label-success").attr('class', 'in-btn-default-sta-two');
        $("#label-primary").attr('class', 'in-btn-default-sta-three');
        currIndex= $('#label-danger').attr('tabindex');
        incr_index=parseInt(currIndex)+1;
        $('#txt_date').attr('tabindex',incr_index);
        $('#label-success').attr('tabindex','');
        $('#label-primary').attr('tabindex','');
      }
      else if(val == 2 )
      {
        $("#label-danger").attr('class', 'in-btn-default-sta-one');
        $("#label-success").attr('class', 'in-btn-default-med-select');
        $("#label-primary").attr('class', 'in-btn-default-sta-three');
        currIndex= $('#label-success').attr('tabindex');
        incr_index=parseInt(currIndex)+1;
        $('#txt_date').attr('tabindex',incr_index);
        $('#label-primary').attr('tabindex','');
      }
      else
      {
       $("#label-danger").attr('class', 'in-btn-default-sta-one');
       $("#label-success").attr('class', 'in-btn-default-sta-two');
       $("#label-primary").attr('class', 'in-btn-default-hig-select');
       currIndex= $('#label-primary').attr('tabindex');
       incr_index=parseInt(currIndex)+1;
       $('#txt_date').attr('tabindex',incr_index);
     }
     document.getElementById("txt_priority").value=val;
   }
   function setStatus(val)
   {
    if(val == 1 )
    {
      $("#btnpriorityhigh").attr('class', 'btn-default-pnd-select');
      $("#btnprioritymedium").attr('class', 'btn-default-sta-two');
      $("#btnprioritylow").attr('class', 'btn-default-sta-three');
      currIndex= $('#btnpriorityhigh').attr('tabindex');
      incr_index=parseInt(currIndex)+1;
      $('#adv_opt').attr('tabindex',incr_index);
      $('#btnprioritymedium').attr('tabindex','');
      $('#btnprioritylow').attr('tabindex','');
    }
    else if(val == 2 )
    {
      $("#btnpriorityhigh").attr('class', 'btn-default-sta-one');
      $("#btnprioritymedium").attr('class', 'btn-default-com-select');
      $("#btnprioritylow").attr('class', 'btn-default-sta-three');
      currIndex= $('#btnprioritymedium').attr('tabindex');
      incr_index=parseInt(currIndex)+1;
      $('#adv_opt').attr('tabindex',incr_index);
      $('#btnprioritylow').attr('tabindex','');
    }
    else
    {
     $("#btnpriorityhigh").attr('class', 'btn-default-sta-one');
     $("#btnprioritymedium").attr('class', 'btn-default-sta-two');
     $("#btnprioritylow").attr('class', 'btn-default-clo-select');
     currIndex= $('#btnprioritylow').attr('tabindex');
     incr_index=parseInt(currIndex)+1;
     $('#adv_opt').attr('tabindex',incr_index);
   }
   document.getElementById("txt_status").value=val;
      //$('#adv_opt').addClass('collapsed');
      //$('#adv_opt').focus();
    }
    function submit_event_form(id)
    {

       // Validating whether recurring or not

       if(is_one_time == 1 & selected == "one_time") {

         if(recurr_done('one_time') == false) {
            return;
         }

      };


      if(is_periodic == 1 & selected == "periodic") {
        if(recurr_done('periodic') == false) {
            return;
         }
      }

      if(is_daily == 1 & selected == "daily") {
        if(recurr_done('daily') == false) {
            return;
         }
      }
      if(is_weekly == 1 & selected == "weekly") {
        if(recurr_done('weekly') == false) {
            return;
         }
      }
      if(is_monthly == 1 & selected == "monthly") {
        if(recurr_done('monthly') == false) {
            return;
         }
       }

      $("#do").val(id);
      txt_dept=$("#txt_dept_id").val();
      room_id= $('#room_id').val();
      txt_guest_id= $('#guest_id').val();
     

      //txt_issue = $('#txt_issue_text').val();
       
      $('.token-x').html('');
     //  $('.nbsp').remove();
     newText_issue=$('.txt_issue').html();
     $('#txt_issue_text').val(newText_issue);
     


     var IDs = [];
     $(".txt_issue").find("a").each(function(){ IDs.push(this.id.match(/\d+/)); });
  //newText_issue2=newText_issue1.replace(" ","");
  //console.log(newText_issue2);
  $('#txt_issue_follow').val(IDs);


  if(room_id == '')
  {
    $('.token-x').html('x');
    error_message('<?php echo Lang('please_enter_the_room_location')?>');
    $('#room_name').focus();
    $('#room_name').val('');
    err=1;
    return false;
  }
  else
  {
    err=0;
  }


if(room_id == '')
  {
    $('.token-x').html('x');
    error_message('<?php echo Lang('please_enter_the_room_location')?>');
    $('#room_name').focus();
    $('#room_name').val('');
    err=1;
    return false;
  }
  else
  {
    err=0;
  }


  if(txt_dept == '')
  {
    $('.token-x').html('x');
        //$('#show_notification').show();
        $('#department_tag').focus();
        $('#department_tag').val('');
        error_message('<?php echo Lang('please_enter_the_department_tag')?>');
        err=1;
        return false;
      }
      else
      {
        err=0;
      }
      if(txt_dept == '' || room_id == '')
      {
        $('.token-x').html('x');
        err=1;
      }
 

      // Validando que el issue sea obligatorio
      /*if(newText_issue.trim().length < 1) {
         error_message('<?php echo Lang("Invalid_issue")?>');

         err=1;
      }*/

      if(err == 0)
      {
        $("#access_module_type").val("create_event");
        $("#access_menu_type").val(1);
        $("#access_action_type").val(1);
        document.cookie = "eventStatus=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
        document.cookie = "eventactive=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
        document.cookie = "search_val=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
        //document.cookie = "eventdept_val=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
        //document.cookie = "eventdate_val=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
        $('#access-modal').modal('show').on('shown.bs.modal', function (){
          $('#txt_check_access_code').focus();
        });
        $('#access-modal').each(centerModal);
      }
      else
      {
        return false;
      }
    }
        /**
        * Function Name :: get_guest_details
        * Description :: to get the guest/room,checkin,checout on change of guest/room
        */
    function autocomplet(val,type) {
    var min_length = 0; // min caracters to display the autocomplete

    if(type == 'room')
    {
      list='room_list_id';
      var keyword = val;
    }
    else if(type == 'rest_room')
    {
      list='rest_room_list_id';
      var keyword=val;
    }
    else if(type == 'rest_guest')
    {
      list='rest_guest_list_id';
      var keyword=val;
    }
    else if(type == 'roommoves')
    {
      list='room_moves_list_id';
      var keyword=val;
    }
    else if(type == 'wakeupcalls')
    {
      list='wakeup_list_id';
      var keyword=val;
    }
    else if(type == 'creditissues')
    {
      list='credit_list_id';
      var keyword=val;
    }
    else if(type == 'noshows')
    {
      list='noshow_list_id';
      var keyword=val;
    }
    else if(type == 'sickcalls')
    {
      list='sick_list_id';
      var keyword=val;
    }
    else if(type == 'pkg_guest')
    {
      list='pkg_guest_list_id';
      var keyword=val;
    }
    else
    {
      list='guest_list_id';
      var keyword = val;
      $('#first').focus();
    }

    formData='keyword='+keyword+'&type='+type;
    if (keyword.length > min_length) {
      $.ajax({
        type:"POST",
        data:formData,
        url:"room_location_data",
        success:function(data)
        {
          if(data != '')
          {
            $('#'+list).show();
            $('#'+list).html(data);
          }
          else
          {
            $('#'+list).html('invalid guest name');
          }
        }
      });
    } else {
      $('#'+list).hide();
      if(type == 'guest')
      {
        $('#eve_guest_id').val('');
        $('#guest_name').val('');
      }
      else
      {
        $('#room_id').val('');
        $('#room_name').val('');

        $('#txt_arr').val('');
        $('#txt_dep').val('');
      }
    }
  }
  function staff_autocomplet(val,type,txtMsg, CharLength, indicator,str) {
    if(type == 'staff')
    {
      list='staff_list_id';
      document.getElementById(str).innerHTML='';
      document.getElementById('displayMesg_issue').innerHTML='';
      chars = txtMsg.innerHTML.length;
      document.getElementById(indicator).innerHTML = CharLength - chars;
      if (chars > CharLength)
      {
        txtMsg.innerHTML = txtMsg.innerHTML.substring(0, CharLength);
      }
      document.getElementById('hiddentxt_issue').value='';
      if(chars>300)
      {
        document.getElementById(str).innerHTML="Message length excceds 300";
        document.getElementById('hiddentxt_issue').value='0';
      }
    var min_length = 0; // min caracters to display the autocomplete
    var keyword = val;
    str=$('#txt_issue').val();
    staff_name_list=$('#staff_name_list').val();

    if(str.match(/<span/gi))
    {
    }
    else
    {
      $('#create_owner_id').val('');
    }
  }
  else
  {
    document.getElementById(str).innerHTML='';
    document.getElementById('displayMesg_issue').innerHTML='';
    chars = txtMsg.value.length;
    document.getElementById(indicator).innerHTML = CharLength - chars;
    if (chars > CharLength)
    {
      txtMsg.value = txtMsg.value.substring(0, CharLength);
    }
    document.getElementById('hiddentxt_issue').value='';
    if(chars>300)
    {
      document.getElementById(str).innerHTML="Message length excceds 300";
      document.getElementById('hiddentxt_issue').value='0';
    }
    var min_length = 0; // min caracters to display the autocomplete
    var keyword = val;
  }
  res_key=keyword.substr(1, keyword.length);
  if (keyword.length > min_length) {
    key_res=keyword.search("@");
    if($.trim(key_res) != -1)
    {
      result_key=keyword.substr(key_res+1, keyword.length);
      formData='keyword='+result_key+'&type='+type;
      $.ajax({
        type:"POST",
        data:formData,
        url:"room_location_data",
        success:function(data)
        {
          $('#'+list).show();
          $('#'+list).html(data);
        }
      });
    }
    else
    {
      $('#'+list).hide();
    }
  } else {
    $('#'+list).hide();
  }
}
function staff_item(staff_id,staff_name)
{
  $('#create_owner_id').val(staff_id);
  $('#staff_name_list').val(staff_name);
  original=$('#txt_issue').val();
  original_data=original.split("@");
  content=original_data[0];
  staff_list=$('#staff_name_list').val();
  if(staff_list != '')
  {
    $('#txt_issue').val(content);
    $('#txt_issue').append('<span style="color:green"><a href="#">'+$('#staff_name_list').val()+'</a></span>');
  }
  else
  {
    $('#txt_issue').val(content);
  }
  $('#staff_list_id').hide();
    //$('#txt_issue').html($('#staff_name_list').val());
  }
  function set_package_item(type,loc,extra,room,phone)
  {
   if(type == 'rest_room')
   {
    $('#edit_location').val(loc);
    $('#rest_room_list_id').hide();
  }
  else if(type == 'rest_guest')
  {
    $('#edit_guest_name').val(loc);
    $('#edit_guest_id').val(extra);
    $('#rest_guest_list_id').hide();
    $('#edit_phone_number').val(phone);
    $('#edit_location').val(room);
  }
  else if(type == 'pkg_guest')
  {
    $('#confirmed_person1').val(loc);
      //$('#edit_guest_id').val(extra);
      $('#pkg_guest_list_id').hide();
    }
  }
  // set_item : this function will be executed when we select an item
  function set_item(room_id,check_in,check_out,locations) {
    $('#room_id').val(room_id);

    $('#txt_arr').val(check_in);
    $('#txt_dep').val(check_out);
    // change input value
    $('#room_name').val(locations);
    // hide proposition list
    $('#room_list_id').hide();
  }
  function set_pass_on_guest_item(type,guest_name,guest_id,room_no,phone)
  {
    if(type == 'roommoves')
    {
      $('#txt_rmguest_phone').val(phone);
      $('#txt_rmguest_id').val(guest_id);
      $('#txt_rmguest_name').val(guest_name);
      $('#txt_rmcurrent_room').val(room_no);
      $('#room_moves_list_id').hide();
    }
    else if(type == 'wakeupcalls')
    {
      $('#txt_wpguest_phone').val(phone);
      $('#txt_wcguest_id').val(guest_id);
      $('#txt_wcguest_name').val(guest_name);
      $('#txt_wproom').val(room_no);
      $('#wakeup_list_id').hide();
    }
    else if(type == 'creditissues')
    {
      $('#txt_crguest_phone').val(phone);
      $('#txt_crguest_id').val(guest_id);
      $('#txt_crguest_name').val(guest_name);
      $('#txt_crroom').val(room_no);
      $('#credit_list_id').hide();
    }
    else if(type == 'noshows')
    {
      $('#txt_nsguest_phone').val(phone);
      $('#txt_nsguest_id').val(guest_id);
      $('#txt_nsguest_name').val(guest_name);
      $('#noshow_list_id').hide();
    }
    else if(type == 'sickcalls')
    {
      $('#txt_scguest_id').val(guest_id);
      $('#txt_scguest_name').val(guest_name);
      $('#sick_list_id').hide();
    }
  }
  function set_guest_item(guest_id,guest_name)
  {
    $('#eve_guest_id').val(guest_id);
    $('#guest_name').val(guest_name);
    $('#guest_list_id').hide();
  }
        /**
        * Function Name :: cng_hotel
        * Description ::On change of hotel in the top right menu
        */
        function cng_hotel(id)
        {
          $('#select_menu_id').val(id);
          document.cookie = "master_from_date=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
          document.cookie = "master_to_date=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
          document.cookie = "i_alert=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
          document.cookie = "nextValue1=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
          document.cookie = "nextValue2=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
          document.cookie = "nextValue3=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
          document.cookie = "nextValueCookie=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
          document.cookie = "eventdept_val=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
          document.cookie = "eventStatus=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
          document.cookie = "eventactive=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
          document.cookie = "search_val=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
          $('#sel_menu_hotel').submit();
        }
        function dept_tag()
        {
          menu='yes';
          document.cookie ='open_event='+menu;
      //$('#department-modal').modal('show');
    }
    function addModal1()
    {
      //alert(str);
      $('#tag_open').show();
    }
    function close_tag()
    {
      //alert(str);
      $('#tag_open').hide();
    }
    function save_tagData1()
    {
      var tag_name=$("#txt_tag_name1").val();
      var err=0;
      if(tag_name == '')
      {
        $("#div_txt_tag_name1").addClass( "has-error" );
        err=1;
      }
      if(err==1)
      {
        $("#msg_span").show();
        return false;
      }
      var String = 'tagname='+ tag_name;
      $.ajax({
        type: "POST",
        url: '<?php echo base_url(); ?>index.php/addTag',
        data: String,
        cache: false,
        success: function(result){
          if(result)
          {
            tag_list=$('#tag_list_form').html();
            document.getElementById("txt_tag_name1").value='';
            $('#tag_list').load('dashboard #tag_list_form');
          }
        }
      });
    }
    function menu_select(menu)
    {
      //alert(menu);
      if(menu == 'dashboard')
      {
        document.cookie = "eventStatus=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
        document.cookie = "eventactive=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
        document.cookie = "search_val=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
        document.cookie = "eventdate_val=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
}
if(menu == 'setting_reports')
{
  $('#rpt_frm_date').val('');
  $('#rpt_to_date').val('');
  $('#report-modal').modal('show');
}
document.cookie ='menu_selected='+menu;
}
function lang_mangemnet(lang)
{
  $.ajax(
  {
    type: "POST",
    url: "Language",
    data:  'lang='+lang,
    cache: false,
    success: function(result)
    {
      window.location.reload();
    }
  });
}
function unset_dept()
{
  document.cookie = "deptopen=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
}
function remove_whitespaces(str){
  var str=str.replace(/^\s+|\s+$/,'');
  return str;
}

function save_access() {

  access_code=$("#txt_check_access_code").val();
  module=$("#access_module_type").val();
  type=$("#access_action_type").val();
  menu=$("#access_menu_type").val();
  hotel=$("#access_hotel_type").val();

  $.ajax(
  {
    type: "POST",
    url: "access_code_check",
    data:  'code='+access_code+'&menu='+menu+'&type='+type+'&hotel_id='+hotel,
    dataType:'json',
    cache: false,
    success: function(result)
    {
      if(result == 'available')
      {
        $('#val_result').val(result);
        if(module == 'hotelSelect')
        {
          document.cookie = "ext_search=";
          document.cookie = "eventdept_val=";
          document.cookie = "date_global=-1";

         document.cookie = "eventdept_val1=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
         document.cookie = "eventdept_val=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
         var set='<?php $_SESSION['dept_tag_id_select']=''; ?>';

         cng_hotel(hotel).click();
       }
       else if(module == 'translation')
       {
        window.location.href= '<?php echo base_url().'index.php/translation'; ?>';
      }
      else if(module == 'packages')
      {
        if(type == 4) $("#packages").submit(); else
        window.location.href= '<?php echo base_url().'index.php/packages'; ?>';
      }
      else if(module == 'dashboard')
      {  
        window.location.href= '<?php echo base_url().'index.php/dashboard'; ?>';
      }
      else if(module == 'lostFound')
      {
        window.location.href= '<?php echo base_url().'index.php/lostFound'; ?>';
      }
      else if(module == 'Passon')
      {
        window.location.href= '<?php echo base_url().'index.php/Passon'; ?>';
      }
      else if(module == 'reports')
      {
        window.location.href= '<?php echo base_url().'index.php/reports'; ?>';
      }
      else if(module == 'news')
      {
        window.location.href= '<?php echo base_url().'index.php/news'; ?>';
      }
      else if (module == 'lost_found')
      {
        $("#lostFound").submit();
      }
      else if (module == 'passondelete')
      {
        $("#deletePasson").submit();
      }
      else if (module == 'hotelDirectoryDelete')
      {
        $("#hotel_dir_grid").submit();
      }
      else if (module == 'own')
      {
        $('#loading_image').show();
        $('#own_it_form').submit();
      }
      else if (module == 'removeown')
      {
        $('#remove_own_it_form').submit();
      }
      else if (module == 'follow')
      {
        $('#follow_it_form').submit();
      }
      else if (module == 'deleteEvent')
      {
        $('#delete_it_form').submit();
      }
      else if (module == 'updateEvent')
      {
        $('#frm_events').submit();
      }
      else if (module == 'emailEvent')
      {
        $("#emailEvent").submit();
      }
      else if (module == 'emailPasson')
      {
        $("#emailPasson").submit();
      }
      else if (module == 'PassonPrint')
      {
        $("#printEvent_form").submit();
      }
      else if (module == 'remainderEvent')
      {
        $("#remainder_form").submit();
      }
      else if(module == 'printEvent')
      {
        $("#printEvent_form").submit();
      }
      else if(module == 'create_event')
      {

       $("#create_event").submit();
       $('#chatAudio')[0].play();
       $('#room_name').val('');
       $('#room_id').val('');
       $('#txt_dept_id').val('');
       $('#department_tag').val('');
       $('#txt_issue').val('');
       $('#txt_issue_follow').val('');
       $('#guest_name').val('');
       $('#guest_id').val('');
       $('#txt_status').val('');
       $('#txt_priority').val('');
       $('#event_action').val('');
       $('#do').val('');
       $('#txt_time').val('');
       $('#txt_date').val('');
       $('#txt_arr').val('');
       $('#txt_dep').val('');
       $('#owner_name').val('');
       $('#owner_id').val('');
       $('.contacted-check').attr('checked', false);
       $('#txt_issue_text').val('');
       $("#btnpriorityhigh").attr('class', 'btn-default-pnd-select');
       $("#btnprioritymedium").attr('class', 'btn-default-sta-two');
       $("#btnprioritylow").attr('class', 'btn-default-sta-three');
       $("#label-danger").attr('class', 'in-btn-default-sta-one');
       $("#label-success").attr('class', 'in-btn-default-med-select');
       $("#label-primary").attr('class', 'in-btn-default-sta-three');

        document.cookie = "date_global=;";
        document.cookie = "ext_search=";
     }
     else if(module == 'attachEvent')
     {
      $('#attachmentFile').submit();
    }
    else if(module == 'save_updateEvent')
    {
      $('#frm_event_view').submit();
    }
    else if(module == 'emailPackage')
    {
      $("#email_packages").submit();
    }
    else if(module == 'printPackage')
    {
      $('#print_package_form').submit();
    }
    else if(module == 'printDeletedEvent')
    {
      $('#print_deleted_events_form').submit();
    }
    else if(module == 'printLostFound')
    {
      $('#print_lostfound_form').submit();
    }
    else if(module == 'emailLostFound')
    {
      $("#email_lost").submit();
    }
    else if(module == 'addPackage')
    {
      $("#packages").submit();
    }
    else if(module == 'update_packages')
    {
      $("#update_packages").submit();
    }
    else if(module == 'update_lost_found')
    {
      $("#update_lost_found").submit();
    }
    else if(module == 'addLostFound')
    {
      $("#frm_lost_found").submit();
    }
    else if(module == 'addroommoves')
    {
      $('#addRoomMoves').submit();
    }
    else if(module == 'addWakeCalls')
    {
      $('#addWakeCalls').submit();
    }
    else if(module == 'addCreditIssues')
    {
      $('#addCreditIssues').submit();
    }
    else if(module == 'addNoShows')
    {
      $('#addNoShows').submit();
    }
    else if(module == 'addSickCall')
    {
      $('#addSickCall').submit();
    }
    else if(module == 'deletePasson')
    {
      $('#deletePasson').submit();
    }
    else if(module == 'frm_passon')
    {
      $('#frm_passon').submit();
    }
    else if(module == 'frm_custom_fields')
    {
      $('#frm_custom_fields').submit();
    }
    else if(module == 'event_change')
    {
      $('#event_change').submit();
    }
    else if(module == 'onholdEvent')
    {
      $('#onholdEvent').submit();
    }
    else if(module == 'changeprofile')
    {
      $('#changeprofile').submit();
    }
    else if(module == 'guest_management')
    {
     $("#guest_management").submit();
   }
   else if(module == 'guest_management_delete')
   {
     $("#guest_management").submit();
   }
   else if(module == 'wpc_delete')
   {
     $("#deletePasson").submit();
   }
   else if(module == 'hotel_management')
   {
     $("#hotel_management").submit();
   }
   else if(module == 'shift_management')
   {
     $("#shift_management").submit();
   }
   else if(module == 'notebar')
   {
     $("#notebar").submit();
   }
   else if(module == 'hotel_profile')
   {
     $("#hotel_profile").submit();
   }
   else if(module == 'rooms_management')
   {
     $("#rooms_management").submit();
   }
   else if(module == 'rooms_management_grid')
   {
     $("#rooms_management_grid").submit();
   }
   else if(module == 'modal_rooms_management')
   {
     $("#modal_rooms_management").submit();
   }
   else if(module == 'hotel_dir')
   {
     $("#hotel_dir").submit();
   }
   else if(module == 'staffManagement' || module == 'hotelDirectory' || module=='Rooms' || module == 'corporateProfile' || module == 'deletedEvents' || module=="Notebar" || module=='dept' || module=='ShiftManagament' || module=='roles' || module=='hotelsManagement' || module=='guestManagement' )
   {
    window.location.href=module;
  }
  else if(module == 'profile')
  {
    window.location.href=module;
  }
          /*else
          {
          alert(module);
        }*/
        $('#access-modal').modal('hide');
      }
      else if(result == 'no-premission')
      {
       error_message('<?php echo Lang('User_dont_have_permission_to_enter')?>');
       $('#access-modal').modal('show').on('shown.bs.modal', function (){
        $('#txt_check_access_code').focus();
      });
       $('#access-modal').each('centerModal');
     }
     else
     {
      error_message('<?php echo Lang('invalid_access_code')?>');
      $('#access-modal').modal('show').on('shown.bs.modal', function (){
        $('#txt_check_access_code').focus();
      });
      $('#access-modal').each('centerModal');
    }
  }
});
     // $("#packages").submit();
   }

 
   function get_access_code(menu,module,hotelId) {

    if(menu == '22' || menu == '13') {
        document.cookie ='pag_dept_tag=0';

        if(menu == '13') { // Is desktop
          document.cookie ='is_angel=0';
        
        } else if(menu == '22') { // Is angel
          document.cookie ='is_angel=1';          
        
        }
         
    }

    $('#error_access').html('');
    $('#txt_check_access_code').html('');

    if(menu == 'dept')
    {

      document.cookie = "deptopen=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
    }
    $("#access_module_type").val(module);
    $("#access_menu_type").val(menu);
    $("#access_action_type").val(3);
    $("#access_hotel_type").val(hotelId);
    $('#access-modal').modal('show').on('shown.bs.modal', function (){
    $('#txt_check_access_code').focus();
    });
    $('#access-modal').each('centerModal');
     document.cookie ='menu_selected='+menu;
  }
    function angel_invite()
  {
      $('#angel_email').val('');
      $('#angel_check_in').val('');
      var d = new Date();
      var month = d.getMonth()+1;
      var day = d.getDate();
      var date_check_s= new Date('<?php echo date('m/d/Y '.'3:00'); ?>'+' PM');
      //var check_in_date =  (month<10 ? '0' : '')+month+ '/' +(day<10 ? '0' : '')+ day + '/' + d.getFullYear();
      if (d.getTime()>date_check_s.getTime()) var angel_check_in='<?php echo date('m/d/Y  h:i A'); ?>';
      else  var angel_check_in='<?php echo date('m/d/Y '.'3:00'); ?>'+' PM';
      $('#angel_check_in').val(angel_check_in);
     // $('#angel_check_in').val(check_in_date + " 3:00 PM");
      var day1 = d.getDate()+1;
      var check_out_date =  (month<10 ? '0' : '')+month+ '/' +(day1<10 ? '0' : '')+ day1 + '/' + d.getFullYear();
      $('#angel_check_out').val(check_out_date + " 12:00 PM");
      $('#angel_invite-modal').modal('show').on('shown.bs.modal', function (){
      });
      $('#angel_invite-modal').each('centerModal');
    }
    function forward_enterkey(event)
    {
      if(event.keyCode == 13)
      {
      //alert();
      $('#btn_save').focus();
      return false;
    }
  }
  function destroy_cookie()
  {
    document.cookie = "master_from_date=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
    document.cookie = "menu_selected=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
    document.cookie = "master_to_date=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
    document.cookie = "i_alert=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
    document.cookie = "nextValue1=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
    document.cookie = "nextValue2=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
    document.cookie = "nextValue3=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
    document.cookie = "nextValueCookie=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
    document.cookie = "eventdept_val=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
    document.cookie = "eventStatus=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
    document.cookie = "eventactive=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
    document.cookie = "pop_up_data=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
    document.cookie = "remove_blur=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
    document.cookie = "eventdept_val1=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
    document.cookie = "date_global=-1";
    document.cookie = "ext_search=";
    document.cookie = "status=1";
    document.cookie = "pagination=0";
    document.cookie ='order_fecha=';
    //deleteAllCookies();

  }



  function deleteAllCookies() {
      var c = document.cookie.split("; ");
     for (i in c) 
      document.cookie =/^[^=]+/.exec(c[i])[0]+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT";    
  }


  /*Active Note Bar Start*/
  function ticker()
  {
    $('#ticker li:first').slideUp(function() {
      $(this).appendTo($('#ticker')).slideDown();
    });
  }
  var timer = setInterval(ticker, 5000);
  $('#ticker').on({
    mouseenter: function(){
      clearInterval(timer);
    },
    mouseleave: function(){
      timer = setInterval(ticker, 5000);
    }
  });
  /*Active Notes bar sliding*/
  /* Recurring Events*/

  
  var selected_F_R = 'F';

  function recurring_event(){ 
 
    $('#rec-events').toggle();
    contact_div('one_time');
    $("#recurring_icon").toggleClass('fa-minus-circle');

    if(selected_F_R == "F") {
      selected_F_R = "R";
  
      $("#txt_date").prop('disabled', true);
      $("#txt_time").prop('disabled', true);

    } else {
      selected_F_R = "F";
      $("#txt_date").prop('disabled', false);
      $("#txt_time").prop('disabled', false);
      
    }
  


    /*var rval=document.getElementById('rec_check').val();
    if(rval==1)
      document.getElementById('rec_check').value=0;
    else
      document.getElementById('rec_check').value=1;*/
  }

  function recurr_done(menu)
  {
    $('#is_recurring').val(1);
    $('#txt_date').val('<?php echo date("m/d/Y"); ?>');

    if(menu == 'one_time')
    {
      $('#recurring_time').val($('#one_time_recurring_time').val());
      $('#recurring_from_date').val($('#one_time_from_date').val());
      $('#recurring_status').val(1);
      $('#recurring_months').val('');
      $('#recurring_weeks').val('');
      $('#days').val('');
      $('#div_one_time').hide();
    }
    else if(menu == 'periodic')
    {
      $('#recurring_time').val($('#periodic_recurring_time').val());
      $('#recurring_from_date').val($('#periodic_from_date').val());
      $('#recurring_to_date').val($('#periodic_to_date').val());
      $('#recurring_status').val(2);
      $('#recurring_months').val('');
      days=$('#every_days').val();
      if(days == '')
      {
        error_message('Please fill the days');
        return false;
      }
      if(days == 0)
      {
        error_message('Please fill the days');
        return false;
      }
      $('#recurring_weeks').val('');
      $('#div_periodic').hide();
    }
    else if(menu == 'daily')
    {
      $('#recurring_time').val($('#daily_recurring_time').val());
      $('#recurring_from_date').val($('#daily_from_date').val());
      $('#recurring_to_date').val($('#daily_to_date').val());
      $('#recurring_status').val(3);
      $('#recurring_months').val('');
      $('#days').val('');
      $('#recurring_weeks').val('');
      $('#div_daily').hide();
    }
    else if(menu == 'weekly')
    {
      $('#recurring_time').val($('#weekly_recurring_time').val());
      $('#recurring_from_date').val($('#weekly_from_date').val());
      $('#recurring_to_date').val($('#weekly_to_date').val());
      $('#recurring_status').val(4);
      var weekarray = [];
      $('.week:checkbox:checked').each(function () {
       weekarray.push($(this).val());
     });
      if(weekarray == '')
      {
        error_message('Please fill the checkbox');
        return false;
      }
      $('#recurring_weeks').val(weekarray);
      $('#recurring_months').val('');
      $('#days').val('');
      $('#div_weekly').hide();
    }
    else if(menu == 'monthly')
    {
      $('#recurring_time').val($('#monthly_recurring_time').val());
      $('#recurring_from_date').val($('#monthly_from_date').val());
      $('#recurring_to_date').val($('#monthly_to_date').val());
      $('#recurring_status').val(5);
      var montharray = [];
      $('.month:checkbox:checked').each(function () {
       montharray.push($(this).val());
     });
      if(montharray == '')
      {
        error_message('Please fill the checkbox');
        return false;
      }
      $('#recurring_months').val(montharray);
      $('#recurring_weeks').val('');
      $('#days').val('');
      $('#div_monthly').hide();
    }

    return true;
  }
  function reset(menu)
  {
    document.cookie ='menu_selected='+menu;
    document.cookie = "search_val=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
    document.cookie = "master_from_date=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
    document.cookie = "master_to_date=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
    document.cookie = "i_alert=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
    document.cookie = "nextValue1=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
    document.cookie = "nextValue2=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
    document.cookie = "nextValue3=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
    document.cookie = "nextValueCookie=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
    document.cookie = "eventdept_val1=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
    document.cookie = "eventdate_val=; expires=Thu, 01 Jan 1970 00:00:00 UTC";

    document.cookie = "eventStatus=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
    document.cookie = "eventactive=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
    document.cookie = "pop_up=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
  }
  function contact_div(menu)
  {
    if(menu == 'one_time')
    {
      $('#on_time').addClass('current-tab-rec');
      $('#periodic').removeClass('current-tab-rec');
      $('#daily').removeClass('current-tab-rec');
      $('#monthly').removeClass('current-tab-rec');
      $('#weekly').removeClass('current-tab-rec');
      $('#div_one_time').show();
      $('#div_periodic').hide();
      $('#div_daily').hide();
      $('#div_monthly').hide();
      $('#div_weekly').hide();
    }
    else if(menu == 'periodic')
    {
      $('#periodic').addClass('current-tab-rec');
      $('#on_time').removeClass('current-tab-rec');
      $('#daily').removeClass('current-tab-rec');
      $('#monthly').removeClass('current-tab-rec');
      $('#weekly').removeClass('current-tab-rec');
      $('#div_one_time').hide();
      $('#div_periodic').show();
      $('#div_daily').hide();
      $('#div_monthly').hide();
      $('#div_weekly').hide();
    }
    else if(menu == 'daily')
    {
      $('#daily').addClass('current-tab-rec');
      $('#periodic').removeClass('current-tab-rec');
      $('#on_time').removeClass('current-tab-rec');
      $('#monthly').removeClass('current-tab-rec');
      $('#weekly').removeClass('current-tab-rec');
      $('#div_one_time').hide();
      $('#div_periodic').hide();
      $('#div_daily').show();
      $('#div_monthly').hide();
      $('#div_weekly').hide();
    }
    else if(menu == 'monthly')
    {
      $('#monthly').addClass('current-tab-rec');
      $('#daily').removeClass('current-tab-rec');
      $('#periodic').removeClass('current-tab-rec');
      $('#on_time').removeClass('current-tab-rec');
      $('#weekly').removeClass('current-tab-rec');
      $('#div_one_time').hide();
      $('#div_periodic').hide();
      $('#div_daily').hide();
      $('#div_monthly').show();
      $('#div_weekly').hide();
    }
    else if(menu == 'weekly')
    {
      $('#weekly').addClass('current-tab-rec');
      $('#monthly').removeClass('current-tab-rec');
      $('#daily').removeClass('current-tab-rec');
      $('#periodic').removeClass('current-tab-rec');
      $('#on_time').removeClass('current-tab-rec');
      $('#div_one_time').hide();
      $('#div_periodic').hide();
      $('#div_daily').hide();
      $('#div_monthly').hide();
      $('#div_weekly').show();
    }
  }
  var currentIndex = 0;
  var firstindex = 1;
  var lastindex = 0;
  var json_string = '';
  function funUpdateEvent1(c,type){

    // p='<?php echo $this->session->userdata("global_update");?>';

    if(c != '' || c != null){
      currentIndex = parseInt(c);
    }
    if(type == 'recurr')
    {
      val=5;
    }
    else
    {
      val=15;
    }
    $('#curr_type').val(type);
    if(c%val == 1)
    {
      $('#prevButton').hide();
    }
    else
    {
      $('#prevButton').show();
    }
    if(type == 'recurr')
    {
      lastindex = parseInt($('#recurr_lastindex').val());
    }
    else
    {
      if (type=='future')  lastindex = parseInt($('#future_lastindex').val()); else
      lastindex = parseInt($('#lastindex').val());
    }
    if(c == (lastindex-1))
    {
      $('#nextButton').hide();
      $('#save_next_filed').hide();
    }
    else
    {
      $('#nextButton').show();
      $('#save_next_filed').show();
    }
    jsGetdata(currentIndex,"",type);
  }
  function jsGetdata(currentIndex,save_next,type){
    if(type == 'recurr')
    {
      var event_id = $('#recurr_event_'+currentIndex).val();
    }
    else
    {
      if (type=='future') var event_id = $('#future_event_'+currentIndex).val(); else var event_id = $('#event_'+currentIndex).val();
    }
    var updatePage = function (response) {
      console.log(response);
      json_string = JSON.stringify(response);
      $('#setupdateList').html(response);
          //$('#update-modal').modal('show');
          $('#update-modal').modal({
            backdrop: 'static',
            keyboard: false
          })
          $("[name='txt_status']").focus();
          jsShowEvent();
        };

        var ajaxOptions = {
          url: 'get_event_by_id',
          method: 'post',
          data : {event_id : event_id,save_next : save_next},
          dataType: 'text',
          success: updatePage
        };

        $.ajax(ajaxOptions);
      }
      function jsRecordPrevious() {
        $('#nextButton').show();
        $('#save_next_filed').show();
        type=$('#curr_type').val();
        if(type== 'recurr')
        {
         lastindex = parseInt($('#lastindex').val());
         currentIndex--;
         val=5;
       }
       else
       {
        lastindex = parseInt($('#recurr_lastindex').val());
        currentIndex--;
        val=15;
      }
      if(currentIndex%val == 1)
      {
        $('#prevButton').hide();
      }
      else
      {
        $('#prevButton').show();
      }
      jsGetdata(currentIndex,"",type);
    }
    function jsRecordNext() {
      type=$('#curr_type').val();
      $('#prevButton').show();
      if(type== 'recurr')
      {
        lastindex = parseInt($('#recurr_lastindex').val());
        currentIndex++;
      }
      else
      {
        lastindex = parseInt($('#lastindex').val());
        currentIndex++;
      }
      if(currentIndex == (lastindex-1))
      {
        $('#nextButton').hide();
        $('#save_next_filed').hide();
      }
      else
      {
        $('#nextButton').show();
        $('#save_next_filed').show();
      }
      jsGetdata(currentIndex,"",type);
    }
    function jsShowEvent() {
      js_articles = JSON.parse(json_string);
      console.log(js_articles[3]);
    }
    /* Recurring Events*/
    </script>
  </head>
  <?php //include('ajax/ajax_events.php'); ?>
  <body >
 <!-- onload="noBack();" onpageshow="if (event.persisted) noBack();" onunload="">-->

    <div class="alert-messaging" style="display:none;" onClick="hide_error()" id="div_error" title="<?php echo isset($_SESSION['msg'])?$_SESSION['msg']:($_SESSION['msg']=''); ?>">
      <div class="alert alert-success alert-dismissible" role="alert">
        <p style="position: fixed; right: 211px; top: 45px; color: #39AAD6; font-weight: 700; font-size: 15px;"><?php echo Lang('Notification')?Lang('Notification'):'Notification'?></p>
        <span class="fa fa-flag">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
        <span id="error_msg" style="position: fixed; top: 64px; right: 51px; min-height: 50px; width: 250px; text-transform: capitalize; display:block; font-size: 14px; color: #333; font-weight: 600;"><?php echo isset($_SESSION['msg'])?$_SESSION['msg']:($_SESSION['msg']=''); ?></span> </div>
    </div>
      <?php
      $hotels_arr=(isset($hotel_arr_change) && $hotel_arr_change)?$hotel_arr_change:$this->session->userdata("hotels_arr");
      $hotel_id=$this->session->userdata("hotel_id");
      $menu_select=isset($_COOKIE['menu_selected'])?$_COOKIE['menu_selected']:'';

      $menu_select = trim($this->uri->segment(1));
 
   //echo  $menu_select;exit;
      $select_class_dashboard='';
      $select_class_lostfound='';
      $select_class_package='';
      $select_class_passon='';
      $select_class_reports='';
      $select_class_newsfeeder='';
      $select_class_profile='';
      $select_class_staff='';

      if($menu_select == 'packages')
      {
        $select_class_package="navbar-default";
      }
      else if($menu_select == 'staffManagement')
      {
        $select_class_staff="btn-info Active";
      }
      else if($menu_select == 'guestManagement')
      {
        $select_class_guest="btn-info Active";
      }
      else if($menu_select == 'translation')
      {
        $select_class_language="btn-info Active";
      }
      else if($menu_select == 'hotelsManagement')
      {
        $select_class_hotels="btn-info Active";
      }
      else if($menu_select == 'ShiftManagament')
      {
        $select_class_shifts="btn-info Active";
      }
      else if($menu_select == 'Notebar')
      {
        $select_class_notebar="btn-info Active";
      }
      else if($menu_select == 'deletedEvents')
      {
        $select_class_del_event="btn-info Active";
      }
      else if($menu_select == 'corporateProfile')
      {
        $select_class_corp_pro="btn-info Active";
      }
      else if($menu_select == 'Rooms')
      {
        $select_class_room_locations="btn-info Active";
      }
      else if($menu_select == 'hotelDirectory')
      {
        $select_class_hotel_dir="btn-info Active";
      }
      else if($menu_select == 'news')
      {
        $select_class_newsfeeder="navbar-default";
      }
      else if($menu_select == 'lostFound')
      {
        $select_class_lostfound="navbar-default";
      }
      else if($menu_select == 'lost_found')
      {
        $select_class_lostfound="navbar-default";
      }
      else if($menu_select == 'dashboard')
      {
        $select_class_dashboard="navbar-default";
      }
      else if($menu_select == 'Passon')
      {
        $select_class_passon="navbar-default";
      }
      else if($menu_select == 'reports')
      {
        $select_class_reports="navbar-default";
      }
      else if($menu_select == 'news_feeder')
      {
        $select_class_newsfeeder="navbar-default";
      }
      else if($menu_select == 'profile')
      {
        $select_class_profile="btn-info Active";
      }
      else if($menu_select == 'staff')
      {
        $select_class_staff="btn-info Active";
      }
      else if($menu_select == 'hotels')
      {
        $select_class_hotels="btn-info Active";
      }
      else if($menu_select == 'guest')
      {
        $select_class_guest="btn-info Active";
      }
      else if($menu_select == 'roles')
      {
        $select_class_roles="btn-info Active";
      }
      else if($menu_select == 'shifts')
      {
        $select_class_shifts="btn-info Active";
      }
      else if($menu_select == 'notebar')
      {
        $select_class_notebar="btn-info Active";
      }
      else if($menu_select == 'del_event')
      {
        $select_class_del_event="btn-info Active";
      }
      else if($menu_select == 'corp_pro')
      {
        $select_class_corp_pro="btn-info Active";
      }
      else if($menu_select == 'room_locations')
      {
        $select_class_room_locations="btn-info Active";
      }
      else if($menu_select == 'hotel_dir')
      {
        $select_class_hotel_dir="btn-info Active";
      }
      else if($menu_select == 'setting_reports')
      {
        $select_class_setting_reports="btn-info Active";
      }
      else if($menu_select == 'rep_pacakges')
      {
        $select_class_rep_pacakges="btn-info Active";
      }else if($menu_select == 'rep_hotel_level')
      {
        $select_class_rep_hotel_level="btn-info Active";
      }
      else if($menu_select == 'rep_dept_level')
      {
        $select_class_rep_dept_level="btn-info Active";
      }
      else if($menu_select == 'rep_lostfound')
      {
        $select_class_rep_lostfound="btn-info Active";
      }
      else if($menu_select == 'com_report')
      {
        $select_class_com_report="btn-info Active";
      }
      else if($menu_select == 'com_packages')
      {
        $select_class_com_packages="btn-info Active";
      }
      else if($menu_select == 'com_lostfound')
      {
        $select_class_com_lostfound="btn-info Active";
      }
      else if($menu_select == 'dept')
      { if($_SESSION['is_angel']==0)
           $select_class_dept="btn-info Active"; else $select_class_dept_angel="btn-info Active";
      }
      else if($menu_select == 'dashboard')
      {
        $select_class_dashboard="navbar-default";
      }
        

      ?>


      <!-- Fixed navbar -->
      <!--modal pop up code Start-->
      <form action="hotel_select" id="sel_menu_hotel" method="post">
        <input type="hidden" name="hotel_selected" id="select_menu_id"/>
      </form>

       <form action="dept" id="dept_angel" method="post">

      </form>
      <div class="modal" id="model_sel_hotel" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-sm">
          <div class="modal-content">
            <div class="modal-header first-pop-h">
              <h4 id="mySmallModalLabel" class="modal-title"><?php echo Lang('Change_Hotel'); ?></h4>
            </div>
            <div class="modal-body first-pop">
              <form  action="hotel_select" method="POST" name="sel_hotel" id="sel_hotel">
                <div class="pull-right drop-events-pop nuvola-rounded-select">
                  <?php $hotes_arr=$this->session->userdata("hotels_arr");
                  $hotel_id_default=current(array_keys($hotes_arr));
                  ?>
                  <select id="hotel_selected" name="hotel_selected" class="main-dropdown-sel show-tick form-control"   >
                    <?php
                    foreach ($hotes_arr as $key=>$value)
                      { ?>
                    <option value="<?php echo $key ?>" ><?php echo $value; ?></option>
                    <?php } ?>
                  </select>
                  <!--/ul-->
                  <div id="msg"></div>
                </div>
                <span class="fa fa-angle-down main-arrow-select" id="main-arrow-select"></span>
                <div class="clearfix"></div>
                <div class="input-group-btn">
                  <input type="hidden" name="view_name" id="view_name" />
                  <input type="hidden" name="pop_up" id="pop_up" value="<?php echo isset($_COOKIE['pop_up_data'])?$_COOKIE['pop_up_data']:'' ?>" />
                  <!--input type="hidden" name="hotel_selected"  id="hotel_selected" value="<?php echo $hotel_id_default; ?>" /-->
                  <input type="submit" id="main_sel_hotel" class="btn btn-default btnRBlue btn-pop-first" value="<?php echo Lang('select')?>"/>
                  <!--<button type="submit" id="access_id"class="btn btn-default btnClosed btn-pop">Cancel</button>-->
                </div>
                <div class="form-group has-error"  id="access_id_error"style="display:none"> <span class="help-block"></span> </div>
              </form>
            </div>
          </div>
          <!-- /.modal-content -->
        </div>
      </div>
      <!--modal pop up code End-->
      <?php $cnt=isset($cnt_hotels)?$cnt_hotels:"";
      if($cnt > 1)
      {
        $class="gussian-blur-bg";
      }
      else
      {
        $class="";
      }
      ?>
      <div class="navbar navbar-default navbar-fixed-top <?php echo $class; ?>" id="customid2" role="navigation">
        <div class="container-fluid topHeader">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button>
            <a class="navbar-brand hidden-sm main-log" href="dashboard"  onclick="reset('dashboard');"><img src="<?php echo base_url('styles/images/logoLogin.png') ?>" width="213" height="53"></a> <a class="navbar-brand logoMobile hidden-xs hidden-md hidden-lg" href="dashboard"><img src="<?php echo base_url('styles/images/logoNuvolaSmall.png') ?>"></a> <div class="hotelBrand hidden-xs">  <table><tr><td>
            <?php 
             if(isset($hotels_arr[$hotel_id]))
                {
                  $hotelnameP=strlen($hotels_arr[$hotel_id]) <= 20? $hotels_arr[$hotel_id]:substr($hotels_arr[$hotel_id],0,20)."...";
                  echo $hotelnameP;
                 }else echo '';   

            ?>

            </td><td><div id="refresh_count_updates" ></div></td></tr></table>  </div> </div>
            <div class="navbar-collapse collapse">
              <ul class="nav navbar-nav navbar-right sm" data-smartmenus-id="1430314891698467">
                <?php $hotel_color_code=$this->session->userdata('hotel_color_code'); ?>
                <li class="dropdown" style="background-color:<?php echo $hotel_color_code; ?>;border-radius:20px;margin-top:5px;"> <a href="#" class="dropdown-toggle has-submenu" data-toggle="dropdown" style="padding-top:4px;"> <span class="fa fa-building-o"></span> 
                <?php
                 if(isset($hotels_arr[$hotel_id]))
                 {
                  $hotelnameP=strlen($hotels_arr[$hotel_id]) <= 20? $hotels_arr[$hotel_id]:substr($hotels_arr[$hotel_id],0,20)."...";
                  echo $hotelnameP;
                 }else echo ''; 

                ?> </a>
              <ul class="dropdown-menu dpt-scroll" role="menu" style="display: none; top: auto; left: 0px; margin-left: -134.317px; margin-top: 0px; max-height: 240px; width: auto; min-height: 50px; min-width: 10em; max-width: 20em;">
                <?php
                if(count($hotels_arr) >1)
                {
                  foreach ($hotels_arr as $key=>$value)
                  {
                    if($key!=$hotel_id)
                      { 
                        $hotelnameP=strlen($value) <= 20? $value:substr($value,0,20)."...";                      
                       ?>
                    <li ><a href="#" class="select_hotel" onClick="get_access_code(-1,'hotelSelect','<?php echo $key; ?>');"><i class="fa fa-building"></i><?php echo $check_hotel=$hotelnameP; ?></a>
                      <input type="hidden" class="check_hotel" value="<?php echo $hotelnameP; ?>"/>
                    </li>
                    <?php }
                  }
                }
                ?>
                <li class="newLicense"><a href="http://www.mynuvola.com/request-product-demo/" target="blank"><i class="fa fa-check-square-o"></i> <?php echo Lang('request_new_license')?Lang('request_new_license'):'Request New License'; ?></a></li>
              </ul>
            </li>
            <li class="dropdown"> <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="fa fa-cog fa-fw">&nbsp;&nbsp;</span>
              <?php

              # Setting

              echo Lang('settings')?Lang('settings'):'Settings' ?>
            </a>
            <ul class="dropdown-menu" role="menu">
              

              <!-- opciones del setings -->

              <?php if(/*$menu_1['menu_6_1'] == 1 || $is_admin == 1*/ 1==1) { ?>
              <li><a href="#" class="<?php echo $select_class_profile?>" onClick="get_access_code(6,'profile','');"><i class="fa fa-lock "></i><?php echo Lang('update_profile_password_code'); ?> </a></li>
              <?php } 




              if(/*$menu_1['menu_7_1'] == 1 || $is_admin == 1*/ 1==1) { ?>
              <li ><a href="#" class="<?php echo $select_class_staff?>" onClick="return get_access_code(7,'staffManagement','');"><i class="fa fa-male"></i><?php echo Lang('create_users_active_user')?Lang('create_users_active_user'):'Create or Edit Users' ?></a></li>
              
              <?php }




              if(/*$menu_1['menu_8_1'] == 1 || $is_admin == 1*/ 1==1) { ?>
              <li ><a href="#"  class="<?php echo isset($select_class_guest)?$select_class_guest:''?>" onClick="get_access_code(8,'guestManagement','');"><i class="fa fa-user"></i><?php echo Lang('guest')?Lang('guest'):'Guests' ?></a></li>
              <?php }



              if(/*$menu_1['menu_14_1'] == 1 || $is_admin == 1*/ 1==1) { ?>
              <li  ><a href="#" class="<?php echo isset($select_class_notebar)?$select_class_notebar:''?>" onClick="get_access_code(14,'Notebar','');"><i class="fa fa-pencil-square-o"></i><?php echo Lang('notebar')?Lang('notebar'):'Notebar' ?></a></li>
              <?php }



              if(/*$menu_1['menu_13_1'] == 1 || $is_admin == 1*/ 1==1) { ?>
              <li  ><a href="#" onClick="get_access_code(13,'dept','');" class="<?php echo isset($select_class_dept)?$select_class_dept:''?>"><i class="fa fa-tags"></i><?php echo Lang('departments_tags')?Lang('departments_tags'):'Departments & Tags' ?></a></li>
              <?php }



                 if(/*$menu_1['menu_22_1'] == 1 ||*/ $is_admin == 1) { ?>
              <li ><a href="#"><i class="fa fa-bullseye"></i><?php echo "Angel" ?></a>
                <ul class="dropdown-menu">
                     <li ><a href="#" onClick="get_access_code(22,'dept','');" class="<?php echo isset($select_class_dept_angel)?$select_class_dept_angel:''?>"><i class="fa fa-tags"></i><?php echo Lang('departments_tags')?Lang('departments_tags'):'Departments & Tags' ?></a></li>
                     <li  ><a href="#" class="<?php echo isset($select_class_hotel_dir)?$select_class_hotel_dir:''?>" onClick="get_access_code(18,'hotelDirectory','');"><i class="fa fa-list-ul" ></i><?php echo Lang('hotel_directory')?Lang('hotel_directory'):'Hotel Directory';?></a></li>
                   </ul>
                 </li>
              <?php } 




              if(/*$menu_1['menu_11_1'] == 1 || $is_admin == 1*/ 1==1) { ?>
              <li ><a href="#"  class="<?php echo isset($select_class_shifts)?$select_class_shifts:'' ?>" onClick="get_access_code(11,'ShiftManagament','');"><i class="fa fa-clock-o"></i><?php echo Lang('shift_management')?Lang('shift_management'):'Shifts, MOD &amp; Pass On';?></a></li>
              <?php }




              if(/*$menu_1['menu_19_1'] == 1  || $is_admin == 1*/ 1==1) { ?>

              <li ><a href="#"><i class="fa fa-briefcase"></i><?php echo (Lang('language_management') != '')?Lang('language_management'):'Language Mangement';?></a>
                <ul class="dropdown-menu">
                  <?php // $languages=array('english','telugu','spanish','hindi');


                  foreach($this->lang->languages as $key=>$value)
                  {
                    if($value != "portuguese") { # Filtrar que no muestre el portugues

                      if($value == $this->session->userdata("language_name")) {

                      ?>
                    <li  class="btn-info Active"><a href="#" onClick="lang_mangemnet('<?php echo $value ?>')"><?php echo Lang(ucwords($value));?></a></li>
                    <?php }
                    else if($value =='English' && $this->session->userdata("language_name") == '')
                      { ?>
                    <li  class="btn-info Active"><a href="#" onClick="lang_mangemnet('<?php echo $value ?>')"> <?php echo ucwords($value);?></a></li>
                    <?php }
                    /*Shirley */

                    //end shirley
                    $root_path= __DIR__;
                    $root_path=explode("\application",$root_path);
                    $url= $root_path[0].'/../language/'.$value.'/message_lang.php';
                    if(file_exists($url) && $value != $this->session->userdata("language_name"))
                    {
                     ?>
                     <li  ><a href="#" onClick="lang_mangemnet('<?php echo $value ?>')"><?php echo Lang(ucwords($value));?></a></li>
                     <?php  } 

                    }
                      
                  }?>


                   </ul>
                 </li>
                 <?php }



                 if(/*$menu_1['menu_19_1'] == 1 &&*/ $is_admin == 1) { ?>
                 <li  ><a href="#"  class="<?php echo isset($select_class_language)?$select_class_language:''?>" onClick="get_access_code(19,'translation','');"> <i class="fa fa-globe"></i><?php echo Lang('language_translations')?Lang('language_translations'):'Language Translations';?></a></li>
                 <!--<li><a href="#"><i class="fa fa-tags"></i> Tags</a></li>-->
                 <?php }


                 if(/*$menu_1['menu_15_1'] == 1 || $is_admin == 1*/ 1==1) { ?>
                 <li  ><a href="#" class="<?php echo isset($select_class_del_event)?$select_class_del_event:''?>" onClick="get_access_code(15,'deletedEvents','');"><i class="fa fa-trash"></i><?php echo Lang('deleted_events')?Lang('deleted_events'):'Deleted Events';?></a></li>
                 <?php }


                /* if($menu_1['menu_18_1'] == 1 || $is_admin == 1) { ?>
                 <li  ><a href="#" class="<?php echo isset($select_class_hotel_dir)?$select_class_hotel_dir:''?>" onClick="get_access_code(18,'hotelDirectory','');"><i class="fa fa-list-ul" ></i><?php echo Lang('hotel_directory')?Lang('hotel_directory'):'Hotel Directory';?></a></li>
                 <?php }*/
                 if(/*$menu_1['menu_16_1'] == 1 || $is_admin == 1*/ 1==1) { ?>
                 <li ><a href="#" class="<?php echo isset($select_class_corp_pro)?$select_class_corp_pro:''?>" onClick="get_access_code(16,'corporateProfile','');"><i class="fa fa-suitcase"></i><?php echo Lang('hotel_profile')?Lang('hotel_profile'):'Hotel Profile';?></a></li>
                 <?php } 


                 if(/*$menu_1['menu_10_1'] == 1 ||*/ $is_admin == 1) {  # ROL SUPER ADMIN  ?>
                 <li ><a href="#"  class="<?php echo isset($select_class_roles)?$select_class_roles:'' ?>" onClick="get_access_code(10,'roles','');"><i class="fa fa-child"></i><?php echo Lang('user_roles')?Lang('user_roles'):'User Roles';?></a></li>
                 <?php }


                 if(/*$menu_1['menu_17_1'] == 1 || $is_admin == 1*/ 1==1) { ?>
                 <li  ><a href="#" class="<?php echo isset($select_class_room_locations)?$select_class_room_locations:''?>" onClick="get_access_code(17,'Rooms','');"><i class="fa fa-list-ul"></i><?php echo Lang('rooms_locations')?Lang('rooms_locations'):'Rooms & Locations';?></a></li>
                 <?php }



                 if(/*$menu_1['menu_9_1'] == 1 || */$is_admin == 1) { # Hotel Management Solo Super ADmin ?> 
                 <li  ><a href="#" class="<?php echo isset($select_class_hotels)?$select_class_hotels:'' ?>" onClick="get_access_code(9,'hotelsManagement','');"><i class="fa fa-building-o"></i><?php echo Lang('hotel_management')?Lang('hotel_management'):'Hotel Management';?></a></li>
                 <?php }


                 if(/*$menu_1['menu_5_1'] == 1 ||*/ $is_admin == 1 and 1==2) { #Lo encontre oculto y lo dejo oculto validandolo por 1==2 ?>
                <li onClick="menu_select('setting_reports');" class="<?php echo  isset($select_class_setting_reports)?$select_class_setting_reports:''?>"><a   href="#" class="dropdown-toggle"><i class="fa fa-file-text"></i><?php echo Lang('Reports')?Lang('Reports'):'Reports';?></a>
                 </li>
                 <?php }


                 ?>
               </ul>
             </li>
              <?php  if(/*$menu_1['menu_22_1'] == 1 ||*/  $is_admin == 1) { # ANGEL SOLO PARA EL SUPER ADMIN ?> 
                 <li class="dropdown"> <a href="#" class="dropdown-toggle special-top" onClick="angel_invite()" data-target="#angel-invite"><span class="fa fa-cog fa fa-mobile">&nbsp;&nbsp;</span><?php echo lang('Angel_Invite');?> <span class="fa fa-angle-down"></span></a></li>
              <?php } ?>
             <li><a href="logout" onClick="destroy_cookie();"><?php echo Lang('logout')?Lang('logout'):'Logout'?></a></li>
           </ul>
           <span class="flashNews">"<?php echo Lang('grand_launch_of')?Lang('grand_launch_of'):'Check Nuvola 4.0'?> <a href="http://mynuvola.com/new-features.html" target="_blank"> <?php echo Lang('nuvola_iOS_application')?Lang('nuvola_iOS_application'):'New Features' ?></a>"</span> </div>
           <!--/.nav-collapse -->
         </div>
         <div class="container-fluid">
          <div class="mainMenu clearfix">
            <div class="navbar-collapse collapse">
              <ul class="nav navbar-nav">
                <?php if($menu_1['menu_1_1'] == 1 || $is_admin == 1) {?>
                <li id="events_menu" class="<?php echo $select_class_dashboard;?>" onClick="menu_select('dashboard');"><a href="dashboard" onClick="reset('dashboard')";><?php echo (Lang('events') != '')?Lang('events'):'Events';?></a></li>
                <?php } if($menu_1['menu_1_2'] == 1 || $is_admin == 1) {
                  ?>
                  <li ><a href="#menu-toggle" id="menu-toggle"><?php echo (Lang('createEvents') != '')?Lang('createEvents'):'Create Events';?></a></li>
                  <?php  }
                  if($menu_1['menu_2_1'] == 1 || $is_admin == 1) {?>
                  <li class="<?php echo $select_class_package ?>" onClick="menu_select('packages');"><a href="packages"><?php echo (Lang('Packages') != '')?Lang('Packages'):'Packages';?></a></li>
                  <?php }
                  if($menu_1['menu_3_1'] == 1 || $is_admin == 1) {?>
                  <li class="<?php echo $select_class_lostfound ?>" onClick="menu_select('lost_found');"><a href="lostFound"><?php echo (Lang('Lost_found') != '')?Lang('Lost_found'):'Lost & Found';?></a></li>
                  <?php }
                  if($menu_1['menu_4_1'] == 1 || $is_admin == 1) {?>
                  <li class="<?php echo $select_class_passon ?>" onClick="menu_select('passon');"><a href="Passon"><?php echo (Lang('Passon') != '')?Lang('Passon'):'Passon';?></a></li>
                  <?php }
                  if($menu_1['menu_5_1'] == 1 || $is_admin == 1) {?>
                  <li class="<?php echo $select_class_reports ?>" onClick="menu_select('reports');"><a href="reports"><?php echo (Lang('Reports') != '')?Lang('Reports'):'Reports';?></a></li>
                  <?php }
                  if($menu_1['menu_21_1'] == 1 || $is_admin == 1) {?>
                  <li class="<?php echo $select_class_newsfeeder ?>" id="news_feeder_focus" onClick="menu_select('news_feeder');"><a href="news"><?php echo (Lang('newsfeeder') != '')?Lang('newsfeeder'):'News Feeder';?></a></li>
                  <?php }
                  
                  ?>
                  <li class="survey_feb" style="opacity: 1;"><div style="position: absolute; color: #40c8be; font-size: 9px; right: 10px; margin-top: 0px;"><?php echo (Lang('coming_survey') != '')?Lang('coming_survey'):'Coming';?> Mar 16'</div><a name=""><?php echo (Lang('guest_survey') != '')?Lang('guest_survey'):'Guest Survey';?><span style="font-weight:500; font-size:12px;"></span></a></li>

                </ul>
                <div class="pull-right shift-txt"> <span style="color: white;"><?php echo $this->session->userdata("").' ';?></span> <span id="timevalue" style="color: white; margin-right: 8px;"></span> <span style="background-color: #40abd4; border: 1px solid #40abd4; border-radius: 15px; color: white; padding: 0px 10px;"> <?php echo Lang('Shift')? '   '.Lang('Shift'):'   Shift' ?>: <span style="color: white;">
                  <?php

                    $hotel_id=$this->session->userdata("hotel_id");
                     //echo $active_shifts['name'];
                    if (isset($active_shifts['name'])) {
                      $label_shifts=Lang($active_shifts['name'])!=''?Lang($active_shifts['name']):$active_shifts['name'];
                       echo '   '.$label_shifts;
                    }else{
                      echo "";
                    }

                  ?>


                </span></span> </div>
              </div>
            </div>
            <div class="noteBar row" style="max-height: 31px;">
              <div class="noteBar-full">
                <div class="noteBar-search" id="search-notebar">
                  <!-- /input-group -->
                  <?php


                  $url= explode('/',$_SERVER['REQUEST_URI']);
                  $select_menu=$url[$URI2];
                  $select_menu = str_replace("?", "", $select_menu);
 
                  if($select_menu != "guestManagement") {
                      setcookie('search_guest', '');
                   }

                   if($select_menu != "reports") {
                      setcookie('pagination_report', '0');
                      setcookie('short_by_field', 'STATUS');
                      setcookie('short_by_type', 'asc');
                   }
                   
                   if($select_menu != "guestManagement") {
                      setcookie('pagination_guest', '0');
                   }
                   
                   if($select_menu != "lostFound") {
                      setcookie('pagination_lost', '0');
                   }
                   
                   
                   if($select_menu != "deletedEvents") {
                      setcookie('pagination_deletedEvents', '0');
                   }
                   
                   if($select_menu != "Rooms") {
                      setcookie('pagination_global', '0');
                   }
                   
                   if($select_menu != "packages") {
                      setcookie('pagination_package', '0'); 
                   }
                   
                   if($select_menu != "dashboard") {
                      setcookie('pagination_home', '0'); 
                      setcookie('pagination_onhold','0');
                      setcookie('pagination_fu');
                      setcookie('pagination_re');
                      #setcookie('order_fecha', '');
                     
                   }
                   
                     
                   #packages


                  ?>
                  <?php   
 
                  if($select_menu == 'dashboard' || $select_menu == 'event_pagination' || $select_menu == 'event_onhold_pagination' || $select_menu == 'event_future_pagination' || $select_menu == 'event_recurring_pagination')
                  {
                   $search_val = $this->input->post("ext_search")?$this->input->post("ext_search"):'';
                   

                   if(isset($_COOKIE['eventStatus']) && ($_COOKIE['eventStatus'] == '0' || $_COOKIE['eventStatus'] == '1' || $_COOKIE['eventStatus'] == '2' || $_COOKIE['eventStatus'] == '3' || $_COOKIE['eventStatus'] == '4' || $_COOKIE['eventStatus'] == '7'))
                   {
                     $header_date ='';
                     $search_val1 ='';
                   }
                   else
                   {
                     $header_date = $this->input->post("header_date")?$this->input->post("header_date"):'';
                     $search_val1 = $this->input->post("search_val")?$this->input->post("search_val"):'';
                   }
                   ?>
 

                   
 
                   <div class="searchBlock rgtFloat pull-right" style="padding-right: 30px;">
                    
                    
                      
                      <!-- Aqui boton buscar-->
                      <div class="input-group search">
                      <input type="text" class="form-control cus-color" id="ext_search" placeholder="Search..." value="<?php echo isset($_COOKIE['ext_search'])? $_COOKIE['ext_search']:'' ?>">
                      <!-- Aqui boton buscar-->
                      <span class="input-group-addon cus-addon cus-input"> <span aria-hidden="true" class="glyphicon glyphicon-search" id="adv_search"></span> </span> </div>

                        
                    </div>
                    <div class="dateNdayBlock rgtFloat master_date pull-right margin-right-9">
                      <div class='input-group date'  >
                        <input type="text" style="background-color:#232323" id="header_date" name="header_date" class="form-control cus-color"  data-date-format="MM/DD/YYYY" placeholder="<?php echo Lang('Date')?Lang('Date'):'Date'?>" value="<?php echo $date_global ?>" readonly/>
                        <span id="icon_date" class="input-group-addon cus-addon cus-input"><span class="glyphicon glyphicon-calendar"></span></span> </div>
                      </div>

                      <div style="margin-right: 10px" class="rgtFloat pull-right">

                   <!-- boton ordenar prioridad  - Ordenar por prioridad -->
                   <?php  if($order_fecha == '1') { ?>
                      <input type="submit" name="Passon" class="form-control cus-color color-red"  value="<?php echo Lang('order_by_priority')?>" onClick="order_by_prioridad();">
                      <!-- <button onclick="order_by_prioridad()" type="button" class="btn btn-default btnClosed btn-xs" style="margin-right: 10px;"><?php echo Lang('order_by_priority') ?></button> -->

                   <?php 

                   } else { ?>
                      <input type="submit" name="Passon" class="form-control cus-color color-red"  value="<?php echo Lang('order_by_date')?>" onClick="order_by_prioridad();"> 
                     <!-- <button onclick="order_by_prioridad()" type="button" class="btn btn-default btnClosed btn-xs" style="margin-right: 10px;"><?php echo Lang('order_by_date') ?></button> -->

                   <?php }

                   ?>  

                   </div>
                   

                      <?php }
                      else if($select_menu == 'Passon')
                        { 
                          $fromDate = $this->input->post("header_startDate")? $this->input->post("header_startDate") : date("m/d/Y");
                          $toDate = $this->input->post("header_endDate")? $this->input->post("header_endDate") : date("m/d/Y");
                          $header_date = $this->input->post("header_date");
                        $search_val = $this->input->post("search_val");
                      ?>
                      <form action="<?php echo @$action;?>"  method="post" id="passon_form" class="pull-right">
                        <div class="searchBlock rgtFloat pull-right"  style="margin-top:-6px; margin-right: -120px;" id="date_focus_tuto">
                            <div id="master_startDate" style="float: left;">
                                <div class="input-group date input-group date packages-top-cols margin-right-9">
                                    <input class="form-control cus-color color-pink-input" type="text" id="header_startDate" name="header_startDate" placeholder="<?php echo Lang('Start_Date')?Lang('Start_Date'):'Start Date'?>" value="<?php echo ($fromDate)?$fromDate:'' ?>" style="background-color: #232323;" readonly="readonly">
                                    <span class="input-group-addon cus-addon cus-input"><span class="glyphicon glyphicon-calendar"></span></span>
                                  </div>
                                </div>
                            <div id="master_endDate" style="float: left; margin-left: 78px;">
                                  <div class="input-group date input-group date packages-top-cols margin-right-9">
                                      <input class="form-control cus-color color-pink-input" type="text" id="header_endDate" name="header_endDate" placeholder="<?php echo Lang('End_Date')?Lang('End_Date'):'End Date'?>" value="<?php echo ($toDate)?$toDate:'' ?>" style="background-color: #232323;" readonly="readonly">
                                      <span class="input-group-addon cus-addon cus-input"><span class="glyphicon glyphicon-calendar"></span></span>
                                  </div>
                            </div>
                            <div style="float: left; margin-left: 78px;">
                                        <?php if($select_menu == 'Passon'){ ?>
                                        <input type="submit" name="Passon" class="form-control cus-color color-blue"  value="<?php echo Lang('Search')?Lang('Search'):'Search'?>" onClick="submit_passon();">
                                        <?php  }
                                        else{?>
                                        <input type="submit" name="<?php echo $menu_select;?>" class="form-control cus-color color-pink" value="<?php echo Lang('Search')?Lang('Search'):'Search'?>">
                                        <?php } ?>
                                </div>
                          </div>
                        </form>
                        <!--<div class="input-group search"> h
                          <input type="text" class="form-control cus-color" id="ext_passon_search" placeholder="<?php echo Lang('Search')?Lang('Search'):'Search'?>..." value="<?php echo isset($search_val)?$search_val:'' ?>" >
                          <span class="input-group-addon cus-addon cus-input"> <span aria-hidden="true" class="glyphicon glyphicon-search" id="adv_passon_search"></span> </span>
                        </div>-->
                      </div>  
                        <?php }
                        else if($select_menu == 'lostFound' || $select_menu == 'packages')
                          { $action = ($select_menu == "lostFound") ? "lostFound" : "packages";
                                $guestName = $this->input->post("header_search_guest");
                                $userName = $this->input->post("header_search_user");
                  //$status = $this->input->post("header_search_status");
                                $status = (!empty($_POST['header_search_status'])) ? $this->input->post('header_search_status') : array();
                                
                                $fromDate = $this->input->post("header_startDate")? $this->input->post("header_startDate") : date("m/d/Y");
                                $toDate = $this->input->post("header_endDate")? $this->input->post("header_endDate") : date("m/d/Y");

                                $search_guest_item_location = $this->input->post("header_search_guest_item_location");
                                ?>
                        <form action="<?php echo $action;?>" method="post" class="pull-right" style="margin-right: -27px; margin-top: -1px;">
                          <div class="input-group date margin-right-9" style="float: left;">
                            <input type="text" class="form-control cus-color color-pink-input" id="header_search_guest" name="header_search_guest" placeholder="<?php echo Lang('Guest')?Lang('Guest'):'Guest'?>" value="<?php echo ($guestName)?$guestName:'' ?>">
                            <span class="input-group-addon cus-addon cus-input"><i class="fa fa-users"></i></span> </div>
                            <div class='input-group date margin-right-9' style="float: left;">
                              <input type="text" class="form-control cus-color color-pink-input" id="header_search_user" name="header_search_user" placeholder="<?php echo Lang('User')?Lang('User'):'User'?>" value="<?php echo ($userName)?$userName:'' ?>">
                              <span class="input-group-addon cus-addon cus-input"><i class="fa fa-user"></i></span> </div>
                              <!--<div class="margin-right-9 custome-drop" style="float: left;">-->
                              <div  style="float: left;">
                                <select id="header_search_status" name="header_search_status[]"  class="selectpicker show-tick custom-select-top" data-live-search="false" multiple="multiple" title="<?php echo Lang('Status')?Lang('Status'):'Status' ?>">
                                  <!--<option value="All" class="check_all_click('All');"><?php //echo Lang('all')?Lang('all'):'All'?></option>-->
                                <!--  <option value="" selected="selected"><?php echo Lang('Status')?Lang('Status'):'Status'?></option>-->
                                  <option value="0"  class="check_all_click('0');" <?php if (in_array('0', $status)) { echo "selected"; }?>><?php echo Lang('Pack_Pending')?Lang('Pack_Pending'):'Pending'?></option>
                                  <option value="1"  class="check_all_click('1');" <?php if (in_array('1', $status)) { echo "selected"; }?>><?php echo Lang('Delivered')?Lang('Delivered'):'Delivered'?></option>
                                </select>
                              </div>
                              <div id="master_startDate" style="float: left; padding-right: 5px;">
                                <div class="input-group date input-group date packages-top-cols margin-right-9">
                                  <input class="form-control cus-color color-pink-input color-placeholder" type="text" id="header_startDate" name="header_startDate" placeholder="<?php echo Lang('Start_Date')?Lang('Start_Date'):'Start Date'?>" value="<?php echo $_SESSION["header_startDate"];?>" style="background-color: #232323; color: #fff;" readonly="readonly">
                                  <span class="input-group-addon cus-addon cus-input"><span class="glyphicon glyphicon-calendar"></span></span>
                                </div>
                              </div>
                              <div id="master_endDate" style="float: left; padding-left: 15px;">
                                  <div class="input-group date input-group date packages-top-cols margin-right-9">
                                    <input class="form-control cus-color color-pink-input" type="text" id="header_endDate" name="header_endDate" placeholder="<?php echo Lang('End_Date')?Lang('End_Date'):'End Date'?>" value="<?php echo $_SESSION["header_endDate"]; ?>" style="background-color: #232323;" readonly="readonly">
                                    <span class="input-group-addon cus-addon cus-input"><span class="glyphicon glyphicon-calendar"></span></span> </div>
                              </div>
                              <div class="input-group date margin-right-9" id="search_focus2" style="float: left; padding-left: 40px; font-weight: 900; font-size: 14px;">
                                    <input type="text" class="form-control cus-color color-pink-input" id="header_search_guest_item_location" name="header_search_guest_item_location" placeholder="<?php echo Lang('Search')?Lang('Search'):'Search'?>" value="<?php echo ($search_guest_item_location)?$search_guest_item_location:'' ?>">
                                    <span class="input-group-addon cus-addon cus-input"><i class="fa fa-search"></i> </span>
                              </div>
                              <div style="float: left; margin-right: 6px;" id="search-placeholder">
                                      <?php if($select_menu == 'lostFound'){ ?>
                                      <input type="submit" name="lost_found" class="form-control cus-color color-orange" value="<?php echo Lang('Search')?Lang('Search'):'Search'?>">
                                      <?php  }
                                      else{?>
                                      <input type="submit" name="<?php echo $menu_select;?>" class="form-control cus-color color-pink" value="<?php echo Lang('Search')?Lang('Search'):'Search'?>">
                                      <?php } ?>
                              </div>
                                  </form>
                                  <?php } else if ($select_menu == 'reports') {  ?>
                                      <form action="<?php echo $action;?>"  method="post" id="passon_form" class="pull-right">
                                        <div class="searchBlock rgtFloat pull-right"  style="margin-top:-6px; margin-right: 30px !important;" id="date_focus_tuto">
                                          <div class="searchBlock rgtFloat">
                                            <div class="input-group search" style="width: 180px;">
                                              
                                              <!-- Campo buscar de reportes  -->
                                              <input type="text" placeholder="<?php echo Lang('Search_issue')?Lang('Search_issue'):'Search issue'?>..." id="find_report" name="find_report" class="form-control cus-color" autocomplete="off">
                                              
                                              <span class="input-group-addon cus-addon cus-input"> <span onClick="submit_form_report()" class="glyphicon glyphicon-search" aria-hidden="true"></span> </span> 
                                            </div>
                                          </div>
                                        </div>
                                      </form>
                                  <?php } else if($select_menu == 'news') { ?>
                                  <form action="<?php echo @$action;?>" method="post" id="news_form" class="pull-right" style="margin-right: 30px;">
                                    <div class="">
                                      <div  id="master_startDate" style="float: left; margin-right: 86px;">
                                        <div class="input-group date input-group date packages-top-cols margin-right-9">
                                          <input style="background-color:#232323" class="form-control cus-color color-pink-input" type="text" id="header4_startDate" name="header_startDate" placeholder="<?php echo Lang('Start_Date')?Lang('Start_Date'):'Start Date'?>" value="<?php echo $this->input->post('header_startDate');?>" autocomplete="off" readonly>
                                          <span  class="input-group-addon cus-addon cus-input"><span  class="glyphicon glyphicon-calendar"></span></span>

                                        </div>
                                      </div>
                                        <div id="master_endDate" style="float: left; margin-right: -80px;">
                                          <div class="input-group date input-group date packages-top-cols margin-right-9">
                                            <input style="background-color:#232323" class="form-control cus-color color-pink-input" type="text" id="header4_endDate" name="header_endDate" placeholder="<?php echo Lang('End_Date')?Lang('End_Date'):'End Date'?>" value="<?php echo $this->input->post('header_endDate');?>" autocomplete="off" readonly>
                                            <span class="input-group-addon cus-addon cus-input"><span class="glyphicon glyphicon-calendar"></span></span> </div>
                                          </div>
                                          <div class="searchBlock rgtFloat">
                                            <div class="input-group search">
                                              <input type="text" value="<?php echo $this->input->post('ext_search');?>" placeholder="<?php echo Lang('Search')?Lang('Search'):'Search'?>..." id="ext_search" name="ext_search" class="form-control cus-color" autocomplete="off">
                                              <span class="input-group-addon cus-addon cus-input"> <span onClick="submit_news();" class="glyphicon glyphicon-search" aria-hidden="true"></span> </span> </div>
                                            </div>
                                      </div>
                                        </form>
                                        <?php } else if($select_menu == 'guestManagement1' || $select_menu == 'Notebar' || $select_menu == 'Rooms' ){?>
                                        <div class="searchBlock rgtFloat pull-right" style="margin-right: 31px;">
                                          <div class="input-group search">
                                            <input type="text" class="form-control cus-color" id="ext_search" placeholder="<?php echo Lang('Search')?Lang('Search'):'Search'?>..." value="">
                                            <span class="input-group-addon cus-addon cus-input"> <span aria-hidden="true" class="glyphicon glyphicon-search" id="adv_search"></span> </span> </div>
                                          </div>
                                        </div>

                                          <?php }
                                         else if( $select_menu == 'staffManagement'){
                                           $closed_event=$this->session->userdata('closed_event');
                                         ?>
                                         <div style="float: left;margin-right: 10px; margin-top: 4px;">
                                         <select id="staff_status" name="staff_status"  class="selectpicker show-tick custom-select-top"  multiple data-max-options="1" title="<?php echo Lang('Staff_can_close_events')?Lang('Staff_can_close_events'):'Staff_can_close_events' ?>">

                                          <option onclick="staffclosed(0)" value="0"  class="check_all_click('0');" <?php if ($closed_event=='0') { echo "selected"; }?>><?php echo Lang('Staff_can_close_events')?Lang('Staff_can_close_events'):'Staff_can_close_events'?> </option>

                                          <option onclick="staffclosed(1)"value="1"  class="check_all_click('1');" <?php if ($closed_event=='1') { echo "selected"; }?>><?php echo Lang('Staff_cant_close_events')?Lang('Staff_cant_close_events'):'Staff_cant_close_events'?></option>
                                        </select>    
                                        </div> 
                                        <div class="searchBlock rgtFloat pull-right" style="margin-right: 31px;">
                                          <div class="input-group search">
                                            <input type="text" class="form-control cus-color" id="ext_search" placeholder="<?php echo Lang('Search')?Lang('Search'):'Search'?>..." value="">
                                            <span class="input-group-addon cus-addon cus-input"> <span aria-hidden="true" class="glyphicon glyphicon-search" id="adv_search"></span> </span> </div>
                                          </div>
                                        </div>
                                        <!--fin funcion-->
                                                                              

                                        <?php } else if($select_menu == 'guestManagement'){?>
                                        <div class="searchBlock rgtFloat pull-right" style="margin-right: 31px;">
                                          <div class="input-group search">
                                            <input type="text" class="form-control cus-color" id="ext_searchg" placeholder="<?php echo Lang('Search')?Lang('Search'):'Search'?>..." value="<?php echo $_COOKIE['search_guest'] ?>">
                                            <span class="input-group-addon cus-addon cus-input"> <span aria-hidden="true" class="glyphicon glyphicon-search" id="adv_searchg"></span> </span> </div>
                                          </div>
                                        </div>
                                        <?php }?>
                                      </div>
                                      <div class="noteBar-text">
                                        <div class="ticker">
                                          <ul id="ticker">
                                            <?php
                                            if(isset($active_notebar) && $active_notebar->num_rows())
                                            {
                                             foreach ($active_notebar->result_array() as $row)
                                             {
                                               if($row['category'] == '0')
                                               {
               // echo "<li>".character_limiter($row['notes'], 65)."</li>";
                                                 echo "<li style='text-overflow: ellipsis; white-space: nowrap; overflow: hidden;'>".$row['notes']."</li>";
                                               }
                                               if($row['category'] == '1' && strtotime(date('Y-m-d')) >= strtotime($row['from_date']) &&strtotime(date('Y-m-d')) <= strtotime($row['to_date']))
                                               {
               // echo "<li>".character_limiter($row['notes'], 65)."</li>";
                                                 echo "<li style='text-overflow: ellipsis; white-space: nowrap; overflow: hidden;'>".$row['notes']."</li>";
                                               }
                                             }
                                           }
                                           else
                                           {
                                            echo "<li></li>";
                                          }
                                          ?>
                                        </ul>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <!-- Begin page content -->
                            <div class="container-fluid mainContainer">
                              <div id="wrapper" class="toggled">
                                <div id="test-pop" class=""></div>
                                <!-- Sidebar -->
                                <div id="sidebar-wrapper">
                                  <div class="sidebarBlock" style="positon:absolute;">
                                    <h2 style=" background: #01739b; / Old browsers /
                                        / IE9 SVG, needs conditional override of 'filter' to 'none' /
                                        background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzAxNzM5YiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMyMTJmNTEiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
                                        background: -moz-linear-gradient(top, #01739b 0%, #212f51 100%); / FF3.6+ /
                                        background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #01739b), color-stop(100%, #212f51));
                                        background: -webkit-linear-gradient(top, #01739b 0%, #212f51 100%);
                                        background: -o-linear-gradient(top, #01739b 0%, #212f51 100%); / Opera 11.10+ /
                                        background: -ms-linear-gradient(top, #01739b 0%, #212f51 100%); / IE10+ /
                                        background: linear-gradient(to bottom, #01739b 0%, #212f51 100%); / W3C /
                                        filter: progid: DXImageTransform.Microsoft.gradient( startColorstr='#01739b', endColorstr='#212f51', GradientType=0 ); height: 50px; margin-top: 0px;"> <span class="pull-right"> <a href="#menu-toggle2" id="menu-toggle2" class="close-sidebar"><span aria-hidden="true" class="fa fa-times"></span></a></span> <b><?php echo Lang('Create_New_Event')?Lang('Create_New_Event'):'Create New Event'?></b> </h2>
                                    <div class="clearfix"></div>
                                    <div class="createEventBlock clearfix">
                                      <form action="dashboard"  method="POST" name="create_event" id="create_event" >
                                        <input type="hidden" name="do" id="do" value="add"/>
                                        <input type="hidden" name="event_action" id="event_action" value="add"/>
                                        <input type="hidden"  id="txt_priority" name="txt_priority" value="<?php echo (set_value("txt_priority"))?set_value("txt_priority"):'2' ?>"/>
                                        <input type="hidden"  id="txt_status" name="txt_status" value="<?php echo (set_value("txt_status"))?set_value("txt_status"):'1' ?>"/>
                                        <div class="form-group clearfix">
                                          <!--Room/Location Name Start-->
                                          <div class="side-bar-set">
                                            <div  class="side-bar-left">
                                              <input type="text"  tabindex="1"  class="form-control side-bar-input" name="room_name" id="room_name" placeholder="<?php echo Lang('Room_location')?Lang('Room_location'):'Room & Location'?>"  autocomplete="off" value="">
                                              <input type="hidden" class="form-control" id="room_id" name="txt_room_id" value="">
                                            </div>
                                            <div class="mandatory-field"><span>*</span></div>
                                          </div>
                                          <!--Room/Location Name End-->
                                          <div class="side-bar-set">
                                            <div  class="side-bar-left">
                                              <input type="hidden" name="txt_dept_id" id="txt_dept_id"/>
                                              <!-- dep and tag -->
                                              <input type="text"  tabindex="2"  id="department_tag" class="form-control side-bar-input" placeholder="<?php echo Lang('dept_tag')?Lang('dept_tag'):'Department / TAG' ?>"/>
                                            </div>
                                            <div class="mandatory-field"><span>*</span></div>
                                          </div>
                                          <div class="clearfix"></div>
                                          <div class="side-bar-set-div">
                                            <hr>
                                          </div>
                                          <div class="side-bar-set">
                                            <div  class="side-bar-left" maxlenght="25">
                                            <!-- Campo issue - Eduardo -->
                                              <div class="form-control side-bar-textarea txt_issue"  tabindex="3"  placeholder="<?php echo Lang('issue')?Lang('issue'):'Issue...' ?>"   contenteditable="true">

                                              </div >

                                                <input type="hidden" id="txt_issue_text" name="txt_issue_data">
                                                <input type="hidden"  id="txt_issue_follow" name="txt_issue_follow">
 
                                              </div>
                                              <div class="issue-txt"><?php echo Lang('Type_to_mention_a_user')?Lang('Type_to_mention_a_user'):"Type @ to mention a user"; ?></div>
                                            </div>
                                            <div class="side-bar-set up-down-margin">
                                              <div  class="side-bar-left">
                                                <?php

                                                ?>
                                                <input type="text"  tabindex="4"  name="txt_guest_name" id="guest_name" class="form-control side-bar-input-dashed" placeholder="<?php echo Lang('Guest_Name')?Lang('Guest_Name'):'Guest Name'?>"/>
                                                <input type="hidden" id="guest_id" name="txt_guest_id"/>
                                                <span id="err_guest_id"><?php echo form_error("txt_guest_id"); ?></span> </div>
                                              </div>
                                              <div class="side-bar-set up-down-margin">
                                                <div  class="side-bar-left">
                                                  <input type="text"  tabindex="5"  id="owner_name" class="form-control side-bar-input-dashed" placeholder="<?php echo Lang('Own_assign')?Lang('Own_assign'):'Own / Assign'?>"/>
                                                  <input type="hidden"  id="owner_id" name="owner"/>
                                                </div>
                                              </div>
                                              <!--Priority Code Start
                                              <div class="col-xs-24" id="div_priority_id">
                                                <!-- <div class="btn-group priorityButtons"> <a id="btnpriorityhigh" class="btn btn-default-sb btn-default-sb-select" onClick="setStatus(1)" tabindex="6"> <?php echo Lang('Pending')?Lang('Pending'):'Pending'?> </a> <a id="btnprioritymedium" class="btn btn-default-sb" onClick="setStatus(2)" tabindex="7"> &nbsp;<?php echo Lang('Completed')?Lang('Completed'):'Completed'?>&nbsp; </a> <a id="btnprioritylow" class="btn btn-default-sb" onClick="setStatus(3)" tabindex="8"> &nbsp; <?php echo Lang('Closed')?Lang('Closed'):'Closed'?>&nbsp; </a> </div> -->
                                            <!--   </div> -->
                                              <!--Priority Code End-->
                                            </div>
                                            <div class="form-group clearfix">
                                              <div class="col-xs-24" style="background: #c5c5c5; min-height: 52px; padding-top: 4px;">
                                                <div class="advancedOptionsToggle"> <a id="adv_opt" tabindex="9" class="toggleLink" href="#" data-toggle="collapse" data-target="#advancedOptions"> <?php echo Lang('advanced_options')?Lang('advanced_options'):'Advanced Options'?><span id="adv_arrow" class="glyphicon glyphicon-chevron-down pull-right" ></span> </a> </div>
                                                <div id="advancedOptions" class="advOptionsBlock collapse">
                                                  <div class="btn-group sb-dp-btns"> <a href="#" onClick="setPriority(3)" class="btn btn-default-sb prior-btn-one" id="label-danger" tabindex="10"><?php echo Lang('Low')?Lang('Low'):'Low'?></a> <a href="#" onClick="setPriority(2)" class="btn btn-default-sb btn-default-sb-select-in prior-btn-two" id="label-success" tabindex="11"><?php echo Lang('Medium')?Lang('Medium'):'Medium'?></a> <a href="#" onClick="setPriority(1)" class="btn btn-default-sb prior-btn-one" id="label-primary" tabindex="12"> <?php echo Lang('High')?Lang('High'):'High'?></a> </div>
                                                  <!--Date Code Start-->
                                                  <div class="input-group side-bar-ad" id="div_date">
                                                    <input type="text" onchange="cancel_recurrent()" style="font-size: 14px; font-weight: 600;" id="txt_date" tabindex="13" value="<?php echo set_value("txt_date")?>"  name="txt_date" class="form-control"  placeholder="<?php echo Lang('Date')?Lang('Date'):'Date'?>" readonly>
                                                    <input type="hidden" id="set_date_time" value="<?php echo date('m/d/Y H:i A');?>"/>
                                                    <span class="input-group-addon-ico"><i class="fa fa-calendar-o"></i></span> </div>
                                                    <!--Date Code End-->
                                                    <!--time code Start-->
                                                    <div class="input-group side-bar-ad" id="div_time">
                                                      <input onchange="cancel_recurrent()" type="text" style="font-size: 14px; font-weight: 600;" id="txt_time" tabindex="14" name="txt_time" value="<?php echo set_value("txt_time")?>"  class="form-control" placeholder="<?php echo Lang('Time')?Lang('Time'):'Time'?>" readonly>
                                                      <span class="input-group-addon-ico"><i class="fa fa-clock-o"></i></span> </div>
                                                      <!--time code End-->
                                                      <!--Arrival/Deparature Time Start-->
                                                      <div class="input-group input-group-double arvDepTime side-bar-ad">
                                                        <input onchange="cancel_recurrent()" style="font-size: 14px; font-weight: 600;" tabindex="15" type="text" id="txt_arr" name="txt_arr" class="form-control" value="<?php echo set_value("txt_arr")?>"  placeholder="<?php echo Lang('arrival_time')?Lang('Arrival'):'Arrival'?>" readonly>
                                                        <span class="input-group-addon-ico"><i class="fa fa-chevron-circle-left"></i></span> </div>
                                                        <div class="input-group input-group-double arvDepTime side-bar-ad">
                                                          <input onchange="cancel_recurrent()" style="font-size: 14px; font-weight: 600;" type="text" tabindex="16" id="txt_dep" name="txt_dep" value="<?php echo set_value("txt_dep")?>" class="form-control"  placeholder="<?php echo Lang('departure_time')?Lang('Departure'):'Departure'?>" readonly>
                                                          <span class="input-group-addon-ico"><i class="fa fa-chevron-circle-right"></i></span> </div>
                                                          <!--Arrival/Deparature Time end -->
                                                          <div class="input-group input-group-double arvDepTime side-bar-ad">
                                                            <input onchange="cancel_recurrent()" type="checkbox"  name="is_contact" value="1" class="contacted-check" tabindex="17" />
                                                            <span class="contacted-text" style="font-size: 14px; font-weight: 600;"><?php echo Lang('Contacted')?Lang('Contacted'):'Contacted'?></span> </div>
                                                            <div class="side-bar-set-div-two">
                                                              <hr style="border-top: 1px solid #fff;">
                                                            </div>
                                                            <!--Recurring Event Start-->
                                                            <a href="#"  onClick="recurring_event()" class="btn btn-default recurring-sd" id="rec-event-check"  tabindex="18">
                                                              <div><?php echo Lang('Recurring')?Lang('Recurring'):'Recurring '?></div>
                                                              <i id="recurring_icon" class="fa fa-plus-circle"></i> </a>
                                                              <div id="rec-events">
                                                                <div class="rec-events-head">
                                                                  <ul class="nav navbar-nav navbar-right">
                                                                    <li class="dropdown current-tab-rec" id="on_time" onClick="contact_div('one_time')"  tabindex="19"><?php echo Lang('One_Time')?Lang('One_Time'):'One Time'?></li>
                                                                    <li class="dropdown" id="periodic" onClick="contact_div('periodic')"  tabindex="20"><?php echo Lang('Periodic')?Lang('Periodic'):'Periodic'?></li>
                                                                    <li class="dropdown" id="daily" onClick="contact_div('daily')"  tabindex="21"><?php echo Lang('Daily')?Lang('Daily'):'Daily'?></li>
                                                                    <li class="dropdown" id="weekly" onClick="contact_div('weekly')"  style="margin-left:30px"  tabindex="22"><?php echo Lang('Weekly')?Lang('Weekly'):'Weekly'?></li>
                                                                    <li class="dropdown" id="monthly" onClick="contact_div('monthly')"  tabindex="23"><?php echo Lang('Monthly')?Lang('Monthly'):'Monthly'?></li>
                                                                  </ul>
                                                                  <div class="clearfix"></div>
                                                                </div>
                                                                <div class="rec-events-bottom">
                                                                  <div id="div_one_time" style="display:none;color:#000000 !important">
                                                                    <div id="recurr_data_one_time">
                                                                      <div class="side-bar-ad-two width-input-one">
                                                                        <div class="side-bar-ad-div" style="margin-top: 2.5%;"><?php echo Lang('Time')?Lang('Time'):'Time'?>: </div>
                                                                        <!--AQUI-->
                                                                        <input onchange="act_recurrent('one_time')" type="text" class="form-control" plceholder="To Date" id="one_time_recurring_time" readonly/>
                                                                      </div>
                                                                      <div class="side-bar-ad-two width-input-one">
                                                                        <div class="side-bar-ad-div" style="margin-top: 2.5%;"><?php echo Lang('Date')?Lang('Date'):'Date'?>: </div>
                                                                        <!--AQUI-->
                                                                        <input onchange="act_recurrent('one_time')"  type="text" class="form-control" plceholder="From Date"  id="one_time_from_date" readonly/>
                                                                      </div>
                                                                       </br>
                                                                    </div>
                                                                  </div>
                                                                  <div id="div_periodic" style="display:none;color:#000000 !important">
                                                                    <div id="recurr_data_periodic">
                                                                      <div class="side-bar-ad-two width-input-one">
                                                                        <div class="side-bar-ad-div" style="margin-top: 2.8%;"><?php echo Lang('Time')?Lang('Time'):'Time'?> :</div>
                                                                        <input onchange="act_recurrent('periodic')" type="text" class="form-control" placeholder="Time"  id="periodic_recurring_time" readonly/>
                                                                      </div>
                                                                      <div class="rec-periodic-every">
                                                                        <div><?php echo Lang('Every')?Lang('Every'):'Every'?></div>
                                                                        <input onchange="act_recurrent('periodic')" type="text" class="form-control" plceholder="every days" name="days" id="every_days" maxlength="3"/>
                                                                        <div><?php echo Lang('Days')?Lang('Days'):'Days'?></div>
                                                                      </div>
                                                                      <div class="side-bar-ad-two width-input-two">
                                                                        <div class="side-bar-ad-div" style="margin-top: 2%;"><?php echo Lang('Start_Date')?Lang('Start_Date'):'Start Date'?>: </div>
                                                                        <input onchange="act_recurrent('periodic')" style="padding-bottom: 4px; width: 100px;" type="text" class="form-control" placeholder="From Date"  id="periodic_from_date" readonly/>
                                                                      </div>
                                                                      <div class="side-bar-ad-two width-input-two">
                                                                        <div class="side-bar-ad-div" style="margin-top: 2.8%;"><?php echo Lang('End_Date')?Lang('End_Date'):'End Date'?>: </div>
                                                                        <input onchange="act_recurrent('periodic')" type="text" style="width: 100px;" class="form-control" placeholder="To Date"  id="periodic_to_date" readonly/>
                                                                      </div>
                                                                      </br>
                                                                    </div>
                                                                  </div>
                                                                  <div id="div_daily" style="display:none;color:#000000 !important">
                                                                    <div id="recurr_data_daily">
                                                                      <div class="side-bar-ad-two width-input-one">
                                                                        <div class="side-bar-ad-div" style="margin-top: 2.5%;"><?php echo Lang('Time')?Lang('Time'):'Time'?> :</div>
                                                                        <input onchange="act_recurrent('daily')" type="text" class="form-control" plceholder="Time"  id="daily_recurring_time" readonly/>
                                                                      </div>
                                                                      <div class="side-bar-ad-two width-input-two">
                                                                        <div class="side-bar-ad-div" style="margin-top: 2.6%;"><?php echo Lang('Start_Date')?Lang('Start_Date'):'Start Date'?>: </div>
                                                                        <input onchange="act_recurrent('daily')" type="text" class="form-control" style=" width: 100px;" plceholder="From Date"  id="daily_from_date" readonly/>
                                                                      </div>
                                                                      <div class="side-bar-ad-two width-input-two">
                                                                        <div class="side-bar-ad-div" style="margin-top: 2.6%;"><?php echo Lang('End_Date')?Lang('End_Date'):'End Date'?>: </div>
                                                                        <input onchange="act_recurrent('daily')" type="text" class="form-control" style=" width: 100px;" plceholder="To Date"  id="daily_to_date" readonly/>
                                                                      </div>
                                                                      </br>
                                                                    </div>
                                                                  </div>
                                                                  <div id="div_weekly" style="display:none;color:#000000 !important">
                                                                    <div id="recurr_data_weekly">
                                                                      <div class="recur-chunk">
                                                                        <div class="recur-chunk-set">
                                                                          <input onchange="act_recurrent('weekly')" type="checkbox" name="week" id="firstweek" class="week" value="1"/>
                                                                          <span><?php echo Lang('Sun')?Lang('Sun'):'Sun'?></span> </div>
                                                                          <div class="recur-chunk-set">
                                                                            <input onchange="act_recurrent('weekly')" type="checkbox" name="week" class="week" value="2"/>
                                                                            <span><?php echo Lang('Mon')?Lang('Mon'):'Mon'?></span> </div>
                                                                            <div class="recur-chunk-set">
                                                                              <input onchange="act_recurrent('weekly')" type="checkbox" name="week" class="week" value="3"/>
                                                                              <span><?php echo Lang('Tue')?Lang('Tue'):'Tue'?></span> </div>
                                                                              <div class="recur-chunk-set">
                                                                                <input onchange="act_recurrent('weekly')" type="checkbox" name="week" class="week" value="4"/>
                                                                                <span><?php echo Lang('Wed')?Lang('Wed'):'Wed'?></span> </div>
                                                                                <div class="recur-chunk-set">
                                                                                  <input onchange="act_recurrent('weekly')" type="checkbox" name="week" class="week" value="5"/>
                                                                                  <span><?php echo Lang('Thurs')?Lang('Thurs'):'Thurs'?></span> </div>
                                                                                  <div class="recur-chunk-set">
                                                                                    <input onchange="act_recurrent('weekly')" type="checkbox" name="week" class="week" value="6"/>
                                                                                    <span><?php echo Lang('Fri')?Lang('Fri'):'Fri'?></span> </div>
                                                                                    <div class="recur-chunk-set">
                                                                                      <input onchange="act_recurrent('weekly')" type="checkbox" name="week" class="week" value="7"/>
                                                                                      <span><?php echo Lang('Sat')?Lang('Sat'):'Sat'?></span> </div>
                                                                                      <div class="clearfix"></div>
                                                                                    </div>
                                                                                    <div class="side-bar-ad-two width-input-one">
                                                                                      <div class="side-bar-ad-div" style="margin-top: 2.6%;"><?php echo Lang('Time')?Lang('Time'):'Time'?> :</div>
                                                                                      <input onchange="act_recurrent('weekly')" type="text" class="form-control" plceholder="Time"  id="weekly_recurring_time" readonly/>
                                                                                    </div>
                                                                                    <div class="side-bar-ad-two width-input-two">
                                                                                      <div class="side-bar-ad-div" style="margin-top: 2.6%;"><?php echo Lang('Start_Date')?Lang('Start_Date'):'Start Date'?>: </div>
                                                                                      <input onchange="act_recurrent('weekly')" type="text" class="form-control" style=" width: 100px;" plceholder="From Date"  id="weekly_from_date" readonly/>
                                                                                    </div>
                                                                                    <div class="side-bar-ad-two width-input-two">
                                                                                      <div class="side-bar-ad-div" style="margin-top: 2.6%;"><?php echo Lang('End_Date')?Lang('End_Date'):'End Date'?>: </div>
                                                                                      <input onchange="act_recurrent('weekly')" type="text" class="form-control" style=" width: 100px;" plceholder="To Date"  id="weekly_to_date" readonly/>
                                                                                    </div>
                                                                                    </br>
                                                                                  </div>
                                                                                </div>
                                                                                <div id="div_monthly" style="display:none;color:#000000 !important">
                                                                                  <div id="recurr_data_monthly">
                                                                                    <div class="recur-chunk">
                                                                                      <div class="recur-chunk-set">
                                                                                        <input onchange="act_recurrent('monthly')" type="checkbox" name="month" class="month" value="1" id="getfirstMonth"/>
                                                                                        <span><?php echo Lang('Jan')?Lang('Jan'):'Jan'?></span> </div>
                                                                                        <div class="recur-chunk-set">
                                                                                          <input onchange="act_recurrent('monthly')" type="checkbox" name="month" class="month" value="2"/>
                                                                                          <span><?php echo Lang('feb')?Lang('feb'):'Feb'?></span> </div>
                                                                                          <div class="recur-chunk-set">
                                                                                            <input onchange="act_recurrent('monthly')" type="checkbox" name="month" class="month" value="3"/>
                                                                                            <span><?php echo Lang('mar')?Lang('mar'):'Mar'?></span> </div>
                                                                                            <div class="recur-chunk-set">
                                                                                              <input onchange="act_recurrent('monthly')" type="checkbox" name="month" class="month" value="4"/>
                                                                                              <span><?php echo Lang('apr')?Lang('apr'):'Apr'?></span> </div>
                                                                                              <div class="recur-chunk-set">
                                                                                                <input onchange="act_recurrent('monthly')" type="checkbox" name="month" class="month" value="5"/>
                                                                                                <span><?php echo Lang('may')?Lang('may'):'May'?></span> </div>
                                                                                                <div class="recur-chunk-set">
                                                                                                  <input onchange="act_recurrent('monthly')" type="checkbox" name="month" class="month" value="6"/>
                                                                                                  <span><?php echo Lang('jun')?Lang('jun'):'Jun'?></span> </div>
                                                                                                  <div class="recur-chunk-set">
                                                                                                    <input onchange="act_recurrent('monthly')" type="checkbox" name="month" class="month" value="7"/>
                                                                                                    <span><?php echo Lang('jul')?Lang('jul'):'Jul'?></span> </div>
                                                                                                    <div class="recur-chunk-set">
                                                                                                      <input onchange="act_recurrent('monthly')" type="checkbox" name="month" class="month" value="8"/>
                                                                                                      <span><?php echo Lang('aug')?Lang('aug'):'Aug'?></span> </div>
                                                                                                      <div class="recur-chunk-set">
                                                                                                        <input onchange="act_recurrent('monthly')" type="checkbox" name="month" class="month" value="9"/>
                                                                                                        <span><?php echo Lang('sep')?Lang('sep'):'Sep'?></span> </div>
                                                                                                        <div class="recur-chunk-set">
                                                                                                          <input onchange="act_recurrent('monthly')" type="checkbox" name="month" class="month" value="10"/>
                                                                                                          <span><?php echo Lang('oct')?Lang('oct'):'Oct'?></span> </div>
                                                                                                          <div class="recur-chunk-set">
                                                                                                            <input onchange="act_recurrent('monthly')" type="checkbox" name="month" class="month" value="11"/>
                                                                                                            <span><?php echo Lang('nov')?Lang('nov'):'Nov'?></span> </div>
                                                                                                            <div class="recur-chunk-set">
                                                                                                              <input onchange="act_recurrent('monthly')" type="checkbox" name="month" class="month" value="12"/>
                                                                                                              <span><?php echo Lang('dec')?Lang('dec'):'Dec'?></span> </div>
                                                                                                              <div class="clearfix"></div>
                                                                                                            </div>
                                                                                                            <div class="side-bar-ad-two width-input-one">
                                                                                                              <div class="side-bar-ad-div" style="margin-top: 2.6%;"><?php echo Lang('Time')?Lang('Time'):'Time'?> :</div>
                                                                                                              <input onchange="act_recurrent('monthly')" type="text" class="form-control" plceholder="Time"  id="monthly_recurring_time" readonly/>
                                                                                                            </div>
                                                                                                            <div class="side-bar-ad-two width-input-two">
                                                                                                              <div class="side-bar-ad-div" style="margin-top: 2.6%;"><?php echo Lang('Start_Date')?Lang('Start_Date'):'Start Date'?>: </div>
                                                                                                              <input onchange="act_recurrent('monthly')" type="text" style=" width: 100px;" class="form-control" plceholder="From Date"  id="monthly_from_date" readonly/>
                                                                                                            </div>
                                                                                                            <div class="side-bar-ad-two width-input-two">
                                                                                                              <div class="side-bar-ad-div" style="margin-top: 2.6%;"><?php echo Lang('End_Date')?Lang('End_Date'):'End Date'?>: </div>
                                                                                                              <input onchange="act_recurrent('monthly')" type="text" style=" width: 100px;" class="form-control" plceholder="To Date"  id="monthly_to_date" readonly/>
                                                                                                            </div>
                                                                                                             </br>
                                                                                                          </div>
                                                                                                        </div>
                                                                                                        <div class="clearfix"></div>
                                                                                                      </div>
                                                                                                      <div class="clearfix"></div>
                                                                                                    </div>
                                                                                                    <input type="hidden" id="recurring_time" name="recurring_time"/>
                                                                                                    <input type="hidden" id="recurring_from_date" name="recurring_from_date"/>
                                                                                                    <input type="hidden" id="recurring_to_date" name="recurring_to_date"/>
                                                                                                    <input type="hidden" id="recurring_weeks" name="recurring_weeks"/>
                                                                                                    <input type="hidden" id="recurring_months" name="recurring_months"/>
                                                                                                    <input type="hidden" id="recurring_status" name="recurring_status"/>
                                                                                                    <input type="hidden" id="is_recurring" name="is_recurring"/>
                                                                                                    <div class="createEventsIcons"> <a href="#" id="print_add" class="advance-opt-icons" onClick="submit_event_form(this.id);" title="<?php echo Lang('Print'); ?>"><i class="fa fa-print"></i></a> <a href="#" id="email_add" class="advance-opt-icons advance-opt-icons-center" onClick="submit_event_form(this.id);" title="<?php echo Lang('Email'); ?>"><i class="fa fa-envelope"></i></a> <a href="#"  id="attach_add" class="advance-opt-icons" onClick="submit_event_form(this.id);" title="<?php echo Lang('Attach'); ?>"><i class="fa fa-paperclip"></i></a> </div>
                                                                                                    <div class="side-bar-set-div-two">
                                                                                                      <hr>
                                                                                                    </div>
                                                                                                  </div>
                                                                                                </div>
                                                                                              </div>
                                                                                              <div class="form-group clearfix">
                                                                                                <!--Access Code Start -->
                                                                                                <div class="col-xs-21" id="div_access_code" style="display:none"> <?php echo Lang('contact_guest')?Lang('contact_guest'):'Contacted'?>
                                                                                                  <?php if(set_value("is_contact")  == 1) { ?>
                                                                                                  <input  id="txt_contact" name="is_contact"  type="checkbox" value="<?php echo set_value("is_contact")?>" checked  />
                                                                                                  <?php } else { ?>
                                                                                                  <input  id="txt_contact" name="is_contact"  type="checkbox" value='0'/>
                                                                                                  <?php } ?>
                                                                                                  <span id="err_access_code"><?php echo form_error("txt_access_code"); ?></span> </div>
                                                                                                  <!--Access Code End -->
                                                                                                </div>
                                                                                                <div class="form-group clearfix">
                                                                                                  <div class="col-xs-24"> <a tabindex="30" class="btn btn-default btnRBlue btn-full side-bar-btn-height" id="add" name="add" onClick="submit_event_form(this.id);" style="font-size: 14px; font-weight: 800;" href="#"><?php echo Lang('Save')?Lang('Save'):'Save'?> </a> </div>
                                                                                                  <div class="col-xs-24"> <a tabindex="31" class="btn btn-default btnPending btn-full side-bar-btn-height" id="new" name="new" onClick="submit_event_form(this.id);" style="font-size: 14px; font-weight: 800;"> <span style="margin-top: 2px; display: block;"><?php echo Lang('save_new')?Lang('save_new'):'Save &amp;  New'?></span></a> </div>
                                                                                                  <div class="col-xs-24"> <a tabindex="32" class="btn btn-default btnClosed btn-full side-bar-btn-height" style="margin-right:0; font-size: 14px; font-weight: 800;" href="#menu-toggle3" style="" id="menu-toggle3" > <span style="margin-top: 2px; display: block;"><?php echo Lang('Cancel')?Lang('Cancel'):'Cancel'?></span></a> </div>
                                                                                                </div>
                                                                                              </form>
                                                                                            </div>
                                                                                          </div>
                                                                                        </div>
                                                                                        <!--Update Event popup start-->
                                                                                        <div class="modal"   id="department-modal"  tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">
                                                                                          <div class="modal-dialog modal-lg">
                                                                                            <div class="modal-content">
                                                                                              <div class="modal-header">
                                                                                                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                                                                                                <h4 class="modal-title"><?php echo Lang('departments')?Lang('departments'):'Departments'; ?></h4>
                                                                                              </div>
                                                                                              <span id="scerrorSpan" style="display:none"><?php echo Lang('required_madatory_fields')?Lang('required_madatory_fields'):'Required Madatory Fields'?> </span>
                                                                                              <div class="modal-body formsBlock"> <a onClick="addModal1();" class="label label-info" ><span class="fa fa-plus-square"></span> Add Tag</a>
                                                                                                <form class="form-horizontal" >
                                                                                                  <div class="row" style="display:none" id="tag_open">
                                                                                                    <div class="col-sm-24 formsBlock">
                                                                                                      <!--tag Name Start-->
                                                                                                      <div class="form-group">
                                                                                                        <div class="col-sm-10 form-horizontal-v has-feedback " id="div_txt_tag_name1" onKeyUp="myFunction(this.id)">
                                                                                                          <label class="control-label"><?php echo Lang('tag')?Lang('tag'):'Tag'?> </label>
                                                                                                          <input type="text" id="txt_tag_name1" name="txt_tag_name" placeholder="Enter Tag Name"  class="form-control">
                                                                                                        </div>
                                                                                                        <div class="col-sm-10 form-horizontal-v has-feedback ">
                                                                                                          <label style="width:100%;">&nbsp;</label>
                                                                                                          <i class="form-control-feedback glyphicon glyphicon-remove"></i> <small class="help-block" ></small> <span class="tagcheck"></span> </div>
                                                                                                        </div>
                                                                                                        <!--Tag Name End-->
                                                                                                        <button type="button" class="btn btn-default" onClick="close_tag();"><?php echo Lang('close')?Lang('close'):'Close'?></button>
                                                                                                        <button type="button" id="btn_save1" class="btn btn-primary" onClick="save_tagData1();"><?php echo Lang('save')?Lang('save'):'Save'?></button>
                                                                                                      </div>
                                                                                                    </div>
                                                                                                  </form>
                                                                                                  <form action="add_event_dept" class="form-horizontal" method="POST" name="addDept1" id="addDept1" >
                                                                                                    <input type="hidden" name="do" id="do" value="<?php echo "save_add" ?>"/>
                                                                                                    <!--Department Name Start-->
                                                                                                    <div class="form-group">
                                                                                                      <div class="col-sm-24 col-md-6 col-lg-6  form-horizontal-v has-feedback <?php echo (form_error('txt_dept_name'))?'has-error':'';?>" id="div_txt_dept_name1" onKeyUp="myFunction(this.id)">
                                                                                                        <label class="control-label "><?php echo Lang('department')?Lang('department'):'Department'?></label>
                                                                                                        <input type="text" <?php if(isset($deptno) || set_value('txt_dept_name')) echo "readonly"; ?> id="txt_dept_name1" name="txt_dept_name" value="<?php echo (isset($deptname)?$deptname:set_value('txt_dept_name')); ?>" class="form-control" >
                                                                                                        <i class="form-control-feedback glyphicon glyphicon-remove"></i> <small class="help-block"><?php echo form_error("txt_dept_name"); ?></small> </div>
                                                                                                        <div class="col-sm-10 form-horizontal-v has-feedback ">
                                                                                                          <label style="width:100%;">&nbsp;</label>
                                                                                                          <span class="check"></span></div>
                                                                                                        </div>
                                                                                                        <!--End Department Name-->
                                                                                                        <!--Tag Start-->
                                                                                                        <div class="form-group">
                                                                                                          <div class="col-sm-24 col-md-24 col-lg-24 " id="tag_list">
                                                                                                            <label class="control-label">Tag</label>
                                                                                                            <div class="well hotelsSelectionBlock deptTagsBlock clearfix" id="tag_list_form">
                                                                                                              <?php
                                                                                                              $hotel_id=$this->session->userdata("hotel_id");
                                                                                                              $tag=$this->db->query("select  * from tags where hotel_id='$hotel_id and is_active=1'");
                                                                                                              if( isset($tag) && $tag->num_rows() >0 )
                                                                                                              {
                                                                                                                foreach($tag->result() as $tg)
                                                                                                                {
                                                                                                                  if(!empty($tag_arr))
                                                                                                                  {
                                                                                                                    if (in_array($tg->tag_id,$tag_arr)) {
                                                                                                                     $check="checked";
                                                                                                                   }
                                                                                                                   else
                                                                                                                   {
                                                                                                                     $check="";
                                                                                                                   }
                                                                                                                 }
                                                                                                                 else
                                                                                                                 {
                                                                                                                  $check="";
                                                                                                                }
                            //echo $check;
                                                                                                                ?>
                                                                                                                <span class="col-sm-24 col-md-8 deptTag">
                                                                                                                  <input name="chktag[]" <?php echo $check; ?> id="chktag1[]" class= "chktag" type="checkbox" value="<?php echo $tg->tag_id; ?>" />
                                                                                                                  <?php echo $tg->tag_name; ?></span>
                                                                                                                  <?php
                                                                                                                }
                                                                                                              }
                                                                                                              ?>
                                                                                                            </div>
                                                                                                          </div>
                                                                                                        </div>
                                                                                                        <div id="err_tag_list"></div>
                                                                                                        <!--End Tag-->
                                                                                                        <!--Access Code start-->
                                                                                                        <div class="form-group">
                                                                                                          <div class="col-sm-24 col-md-6 col-lg-6 form-horizontal-v has-feedback <?php echo (form_error('access_code'))?'has-error':'';?>" id="access_div1" onKeyUp="myFunction(this.id)" >
                                                                                                            <label class="control-label"><?php echo Lang('access_code')?Lang('access_code'):'Access Code'?> <span class="reqIndicator">*</span></label>
                                                                                                            <input class="form-control" placeholder="Type Your User ID" name="access_code" id="access_code1" >
                                                                                                            <i class="form-control-feedback glyphicon glyphicon-remove"></i> <small class="help-block"><?php echo form_error("access_code"); ?></small> <span class="checkAccesscode help-block"><span> </div>
                                                                                                          </div>
                                                                                                          <!--Access Code start-->
                                                                                                          <!--buttons code-->
                                                                                                          <div class="form-group">
                                                                                                            <div class="col-sm-12">
                                                                                                              <button type="button" class="btn btn-info" id="btn_dept_save1"><span class="fa fa-save"></span> Save</button>
                                                                                                                <a href="" class="btn btn-danger"><span class="fa fa-close"></span> Cancel</a> </div>
                                                                                                            </div>
                                                                                                            <!--buttons code-->
                                                                                                          </form>
                                                                                                        </div>
                                                                                                        <!--Modal body end-->
        <!--<div class="modal-footer">
      </div>-->
    </form>
  </div>
  <!-- /.modal-content -->
</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->
<input type="hidden" id="val_result"/>

<div class="modal"   id="access-modal"  tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">
  <div class="modal-dialog" style="width:300px;">
    <div class="modal-content">
      <form id="access_code_check"  method="post"  >
        <input  type="hidden" id="access_module_type" name="module" value=""/>
        <input  type="hidden" id="access_menu_type" name="menu" value=""/>
        <input  type="hidden" id="access_action_type" name="type" value=""/>
        <input  type="hidden" id="access_hotel_type" name="hotel_id" value=""/>
        <div class="modal-header">
          <h4  id="mySmallModalLabel" class="modal-title"><?php echo Lang('User_Code')?Lang('User_Code'):'User Code'?></h4>
        </div>
        <span id="scerrorSpan" style="display:none"> <?php echo Lang('Required_man')?Lang('Required_man'):'Required Madatory Fields'?></span>
        <div class="modal-body first-pop">
          <div class="row">
            <!--tag Name Start-->
            <div id="validate_email_id" class="col-sm-24 col-md-24 col-lg-24 form-horizontal-v has-feedback <?php echo (form_error('txt_email_id'))?'has-error':'';?>">
              <input  type="password" name="code" id="txt_check_access_code"  class="form-control" value="" autocomplete="off" maxlength="6" autofocus/>
            </div>
            <!--Tag Name End-->
          </div>
          <div class="modal-footer-two">
            <button type="submit" id="btn_save" class="btn btn-default btnRBlue btn-pop-two pull-left"  title="<?php echo Lang('Go')?Lang('Go'):'GO'?>"><?php echo Lang('Go')?Lang('Go'):'GO'?></button>
            <!-- Buton close of delete event-->
            <button type="button"  id="btn_clos" class="btn btn-default btnClosed btn-pop-two pull-left" data-dismiss="modal" title="<?php echo Lang('Close')?Lang('Close'):'Close'?>"><?php echo Lang('Close')?Lang('Close'):'Close'?></button>
            <div class="clearfix"></div>
          </div>
          <div class="clearfix"></div>
        </div>
        <!--Modal body end-->
      </form>
    </div>
    <!-- /.modal-content -->
  </div>
  <!-- /.modal-dialog -->
</div>


<!-- /.modal -->
<!--Update Event Modal up end  -->
<!-- start footer support case model popup -->
<!-- -->
<div class="modal" id="report-modal"  tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">
  <div class="special-top" style="display:none;"><span class="fa fa-cog fa fa-mobile">&nbsp;&nbsp;</span><?php echo lang('Angel_Invite');?> <span class="fa fa-angle-down"></span></div>
  <div class="modal-dialog" style="width:252px;">
    <div class="modal-content">
      <form action="comparative_report"  id="com_rpt"  method="post"  >
        <button type="button" class="close close-two" data-dismiss="modal"><span aria-hidden="true"><i class="fa fa-times"></i></span><span class="sr-only"><?php echo Lang('Close')?Lang('Close'):'Close'?></span></button>
        <div class="modal-reminder">
          <div class="pack-feedback" id="firstname_div">
            <div class="passon-pop-set">
              <div class="mandatory-field-three"></div>
              <div class="clearfix"></div>
            </div>
            <input type="text" autocomplete="off" name="rpt_frm_date" id="rpt_frm_date" class="form-control txt-auto ui-autocomplete-input" value="" readonly="true" placeholder = "<?php echo Lang('Start_Date');?>" >
          </div>
        </div>
        <div class="modal-reminder">
          <div class="pack-feedback" id="firstname_div">
            <div class="passon-pop-set">
              <div class="mandatory-field-three"></div>
              <div class="clearfix"></div>
            </div>
            <input type="text" autocomplete="off" name="rpt_to_date" id="rpt_to_date" class="form-control txt-auto ui-autocomplete-input" value="" readonly="true" placeholder = "<?php echo Lang('End_Date');?>"  >
          </div>
        </div>
        <div class="modal-reminder pack-btns-two">
          <!--<button class="btn btn-default btnPending btn-pop-six pull-left margin-right-5" onclick="submit_form(this.id);" id="new" name="new" type="button">Save &amp; Send Angel Invite </button>-->
          <button class="btn btn-default btnPending btn-pop-seven pull-left margin-right-5 save_new" id="new" name="new" type="button" onClick="submit_cmp_rpt()"><?php echo Lang('Comparison_Report');?> </button>
        </div>
        <div class="clearfix"></div>
        <!--Modal body end-->
      </form>
    </div>
    <!-- /.modal-content -->
  </div>
  <!-- /.modal-dialog -->
</div>
<!-- -->
<div class="modal"   id="support-case-modal"  tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">
  <div class="modal-dialog" style="width:480px;">
    <div class="modal-content notificationsPopup">
      <div id="setaddList">
        <form method="post" id="email_support" action="email_support" enctype= "multipart/form-data">
          <div class="modal-header">
            <button data-dismiss="modal" class="close" type="button"><span aria-hidden="true"><i class="fa fa-times"></i></span><span class="sr-only">Close</span></button>
            <h4 class="modal-title"><?php echo Lang('Support_case')?Lang('Support_case'):'Support Case'; ?></h4>
          </div>
          <div class="modal-reminder">
            <div class="pack-feedback-full" id="item_div" onKeyUp="myFunction(this.id)">
              <div class="passon-pop-set">
                <label class="control-label"><?php echo Lang('Browser')?Lang('Browser'):'Browser'; ?><span id="s_message" name="s_message" style="color:#FF0000; vertical-align:middle; font-weight:bold;font-style: italic"></span></label>
                <div class="clearfix"></div>
              </div>
              <!--<input type="text" value="" class="form-control Contactnumber" name="item_name" id="item_name">-->
              <div class="nuvola-rounded-select">
                <select  class="form-control" name="browser">
                  <option value="Internet Explorer">Internet Explorer</option>
                  <option value="Google Chrome">Google Chrome</option>
                  <option value="Mozilla Firefox">Mozilla Firefox</option>
                  <option value="Safari">Safari</option>
                  <option value="Opera">Opera</option>
                  <option value="Other">Other</option>
                </select>
              </div>
            </div>
            <span class="pull-right" style="display:none">Character Count:
              <label id="lblcount" style="background-color:#E2EEF1;color:Red;font-weight:bold;">100</label>
            </span>
            <input type="hidden" name="hiddentxt" id="hiddentxt" value="1">
            <span id="displayMesg"><small class=""></small> </span> </div>
            <div class="modal-reminder">
              <div class="pack-feedback-full">
                <div class="passon-pop-set">
                  <label class="control-label"><?php echo Lang('Issue')?Lang('Issue'):'Issue';?></label>
                  <span class="mandatory-field-three">*</span>
                  <div class="clearfix"></div>
                </div>
                <div class="btnsUpdateEvents">
                  <textarea id="issue_support" name="issue" class="form-control" placeholder="<?php echo Lang('Tell_us')?Lang('Tell_us'):'Tell us what\'s happening...';?>" style="height:73px;"></textarea>
                </div>
              </div>
            </div>
            <!--<div class="modal-sub-head border-dashed-bottom"> Attach File </div>-->
            <div class="modal-reminder">
              <div class="pack-feedback-full">
                <div class="passon-pop-set"  style="margin-top:0px;">
                  <label class="control-label"><?php echo Lang('Attach_file')?Lang('Attach_file'):'Attach File';?></label>
                  <div class="clearfix"></div>
                </div>
                <div class="btnsUpdateEvents"  style="margin-bottom:0px;">
                  <input type="file" name="userfile" style="width:100%; height:25px; padding-top:2px;" />
                  <!--<textarea id="" name="" class="form-control" placeholder="Tell us what's happening..." style="height:73px;"></textarea>-->
                </div>
              </div>
            </div>
            <div class="col-sm-24 alpha omega">
              <div class="access-code-pop-two">
                <input type="password" class="form-control" placeholder="<?php echo Lang('Access_code')?Lang('Access_code'):'Access code';?>" id="access_code_support" name = "acces_code" maxlength="6">
                <i class="fa fa-lock"></i> </div>
                <div class="mandatory-field-two"><span>*</span></div>
                <small class="validation-cont" id="err_rem_code"></small>
                <div class="clearfix"></div>
              </div>
              <div class="clearfix"></div>
              <div class="modal-reminder">
                <div class="modal-footer-three">
                  <button onClick="send_mail()" class="btn btn-default btnRBlue btn-pop-two pull-left reminder-btn-save" type="button"><?php echo Lang('Send_Email')?Lang('Send_Email'):'SEND EMAIL';?> </button>
                  <button data-dismiss="modal" class="btn btn-default btnClosed btn-pop-two pull-left reminder-btn-cancel" type="button"><?php echo Lang('Close')?Lang('Close'):'Close';?></button>
                  <div class="clearfix"></div>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
    <!--bootstarp select all-->
    <input type="hidden" name="optionclick" id="optionclick" value=""/>
    <!-- end of bootstrap select all-->
    <!-- end footer support case model popup -->
    <!-- /#sidebar-wrapper -->
    <!-- Page Content -->
    <div id="page-content-wrapper">
      <div class="container-fluid mainContent">
        <div class="row fullHeightBlock">
          <!-- Mahender start -->
          <div class="modal" id="angel_invite-modal"  tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">
            <div class="special-top" style="display:none;"><span class="fa fa-cog fa fa-mobile">&nbsp;&nbsp;</span><?php echo lang('Angel_Invite');?> <span class="fa fa-angle-down"></span></div>
            <div class="modal-dialog special-pop" style="width:252px;">
              <div class="modal-content">
                <form action="angelInvite"  id="frm_angel_invite"  method="post"  >
                  <div class="modal-header light-blue">
                    <h4 id="mySmallModalLabel" class="modal-title light-blue"><?php echo Lang('Guest_Information')?Lang('Guest_Information'):'GUEST INFORMATION'?></h4>
                    <button type="button" class="close close-two" data-dismiss="modal"><span aria-hidden="true"><i class="fa fa-times"></i></span><span class="sr-only"><?php echo Lang('Close')?Lang('Close'):'Close'?></span></button>
                  </div>
                  <span id="scerrorSpan" style="display:none"> <?php echo Lang('Required_man')?Lang('Required_man'):'Required Madatory Fields'?></span>
                  <div class="modal-reminder">
                    <div class="pack-feedback" id="firstname_div">
                      <div class="passon-pop-set">
                        <label class="control-label"><?php echo Lang('Angel_Email')?Lang('Angel_Email'):'Email'?></label>
                        <div class="mandatory-field-three"> * </div>
                        <div class="clearfix"></div>
                      </div>
                      <input type="email" autocomplete="off" name="angel_email" id="angel_email" class="form-control txt-auto ui-autocomplete-input" value="" placeholder = "<?php echo Lang('Angel_Email'); ?>"/>
                    </div>
                  </div>
                  <div class="modal-reminder">
                    <div class="pack-feedback" id="firstname_div">
                      <div class="passon-pop-set">
                        <label class="control-label"><?php echo Lang('Check_In')?Lang('Check_In'):'Check In'?></label>
                        <div class="mandatory-field-three"> * </div>
                        <div class="clearfix"></div>
                      </div>
                      <input type="text" autocomplete="off" name="angel_check_in" id="angel_check_in" class="form-control txt-auto ui-autocomplete-input" value="" readonly="true" placeholder = "<?php echo Lang('Check_In')?Lang('Check_In'):'Check In'?>">
                    </div>
                  </div>
                  <div class="modal-reminder">
                    <div class="pack-feedback" id="firstname_div">
                      <div class="passon-pop-set">
                        <label class="control-label"><?php echo Lang('Check_Out')?Lang('Check_Out'):'Check Out'?></label>
                        <div class="mandatory-field-three"> * </div>
                        <div class="clearfix"></div>
                      </div>
                      <input type="text" autocomplete="off" name="angel_check_out" id="angel_check_out" class="form-control txt-auto ui-autocomplete-input" value="" readonly="true" placeholder = "<?php echo Lang('Check_Out')?Lang('Check_Out'):'Check Out'?>">
                      <small id="firstname_msg" style="color:#a94442; display: none;" class="help-block1"></small> </div>
                    </div>
                  <div class="modal-reminder">
                    <div class="pack-feedback" id="firstname_div">
                      <div class="passon-pop-set">
                        <label class="control-label"><?php echo Lang('Room_Number')?Lang('Room_Number'):'Room Number'; ?><span style="font-size: 13px; font-weight: 500;"></span></label>
                        <div class="mandatory-field-three"> * </div>
                        <div class="clearfix"></div>
                      </div>
                        <input type="text" value="" class="form-control txt-auto ui-autocomplete-input"  id="room_no_angel" name="room_no_auto">
                        <input type="hidden" id="room_no2" name="room_no2" /><!--hidden-->
                    </div>
                  </div>
                    <div class="modal-reminder pack-btns-two">
                      <!--<button class="btn btn-default btnPending btn-pop-six pull-left margin-right-5" onclick="submit_form(this.id);" id="new" name="new" type="button">Save &amp; Send Angel Invite </button>-->
                      <button class="btn btn-default btnPending btn-pop-seven pull-left margin-right-5 save_new" id="new" name="new" type="button" onClick="submit_angel_invite()"><?php echo Lang('Send_Angel_Invite'); ?> </button>
                    </div>
                    <div class="clearfix"></div>
                    <!--Modal body end-->
                  </form>
                </div>
                <!-- /.modal-content -->
              </div>
              <!-- /.modal-dialog -->
            </div>
            <!-- Mahender end -->
            <!--this input for send hotel id to get registered guests in this hotel-->
            <input type="hidden" id="sess_hotel" value="<?php echo $this->session->userdata("hotel_id") ?>" />
            <input type="hidden" id="sess_hotel1" value="<?php echo $this->session->userdata("tutorial") ;?>" />

             <script>
            //   (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            //   (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            //   m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            //   })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            //   ga('create', 'UA-46641392-1', 'auto');
            //   ga('send', 'pageview');

            // </script>
            <script>
            function submit_angel_invite()
            {
    //alert('sdfdsfsdfdf');die;
    var submitmore = true;
    var angel_status = true;
    angel_email = $('#angel_email').val();
    angel_check_in = $('#angel_check_in').val();
    angel_check_out = $('#angel_check_out').val();
    room_number_angel =  $('#room_no_angel').val();
    if($.trim(angel_email) == '')
    {
      $('#email_div').addClass('has-error');
      error_message("<?php echo Lang('Please_Enter_Angel_Email_Id')?Lang('Please_Enter_Angel_Email_Id'):'Please enter email'; ?>");
      $('#angel_email').focus();
      angel_status = false;
    }else  if($.trim(angel_check_in) == '')
    {
      $('#lastname_div').removeClass('has-error');
      $('#check_in_div').addClass('has-error');
      error_message("<?php echo Lang('Please_Enter_Check_In')?Lang('Please_Enter_Check_In'):'Please enter check in'; ?>");
      $('#angel_check_in').focus();
      angel_status = false;
    }else if($.trim(angel_check_out) == '')
    {
      $('#check_in_div').removeClass('has-error');
      $('#check_out_div').addClass('has-error');
      error_message("<?php echo Lang('Please_Enter_Check_Out')?Lang('Please_Enter_Check_Out'):'Please enter check out'; ?>");
      $('#angel_check_out').focus();
      angel_status = false;
    }

    else if($.trim(room_number_angel) == '')
    {
      $('#check_out_div').removeClass('has-error');
      $('#room_no_angel_div').addClass('has-error');
      error_message("<?php echo Lang('Please_Enter_Room_Num')?Lang('Please_Enter_Room_Num'):'Please enter valid room number'; ?>");
      $('#room_no_angel').focus();
      angel_status = false;
      return;
    }


    if($.trim(angel_check_in) != '' && $.trim(angel_check_out) !='')
    {
      if($.trim(angel_check_in) > $.trim(angel_check_out))
      {
        $('#check_in_div').removeClass('has-error');
        $('#check_out_div').addClass('has-error');
        error_message("<?php echo Lang('Valid_Check_In_And_Check_Out')?Lang('Valid_Check_In_And_Check_Out'):'Checkout date should be greater than checkin date'; ?>");
        $('#angel_check_out').focus();
        return angel_status = false;
      }
    }


    if(angel_email)
    {
      angel_status = validateEmail(angel_email);
    }

    if(angel_status && submitmore)
    {
     var status;
     var sno='no';
     var angel_email = document.getElementById('angel_email').value;
     var angel_check_in = document.getElementById('angel_check_in').value;
     var angel_check_out = document.getElementById('angel_check_out').value;
     var angel_room = document.getElementById('room_no2').value;
    //alert(check_out);
    //alert(st);
    if(angel_check_out)
    {
      $.ajax({
        type : "POST",
        url : "<?php echo base_url();?>index.php/isGuestActive",
        dataType: "json",
        async: "false",
        data: 'email_address='+angel_email+'&check_in='+angel_check_in+'&check_out='+angel_check_out+'&sno='+sno,
        success: function(data){
          //alert(data);die;
          if(data > 0)
          {
           error_message("<?php echo Lang('This_Guest_Already_Checked_In')?Lang('This_Guest_Already_Checked_In'):'This guest already checked in'; ?>");
         }
         else{
          submitmore = false;
          $("form#frm_angel_invite").submit();
        }
      }
    });
    }
  }
}
function validateEmail(email)
{
  var reg = /^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/
  if (reg.test(email)){
    return true; }
    else{
      $('#email_div').addClass('has-error');
      error_message("<?php echo Lang('Please_Enter_Valid_Email_Id')?Lang('Please_Enter_Valid_Email_Id'):'Please enter valid email'; ?>");
      $('#email_address').focus();
      status = false;
      return false;
    }
  }
  function cancel_recurrent() {

    $("#is_recurring").val("");
    selected = "";
  }
  function act_recurrent(tipo) {


    if(tipo == 'one_time') {
      is_one_time = 1;
    } else if(tipo == 'periodic') {
      is_periodic = 1;

    }
    else if(tipo == 'daily') {
      is_daily = 1;

    }
    else if(tipo == 'weekly') {
      is_weekly = 1;

    } else if(tipo == 'monthly') {
      is_monthly = 1;

    } else {
      selected = "";
    }
    selected = tipo;
    //alert(selected);
  }
  function send_mail(){
    var flag = true;
    var access_code = $.trim($('#access_code_support').val());
    if($.trim($('#issue_support').val())){
      if($.trim($('#access_code_support').val())){
        $.ajax(
        {
          type: "POST",
          url: "get_username_access_code",
          data: 'acces_code='+access_code,
          cache: false,
          success: function (result)
          {
           if(result == 1){
            $("form#email_support").submit();
          }else{
            error_message("<?php echo Lang('Invalid_Access_Code')?Lang('Invalid_Access_Code'):'Invalid Access Code'; ?>");
            $('#access_code_support').focus();
          }
        }
      });
      }else{
        error_message("<?php echo Lang('Enter_Access_Code')?Lang('Enter_Access_Code'):'Enter Access Code'; ?>");
        $('#access_code_support').focus();
        flag = false;
      }
    }else{
      error_message("<?php echo Lang('Issue_Field_is_Required')?Lang('Issue_Field_is_Required'):'Issue Field is Required'; ?>");
      $('#issue_support').focus();
      $('#issue_support').val('');
      flag = false;
    }
    //if(flag)
   // $("form#email_support").submit();
 }
 function chk_access_code()
 {
  val=$('#txt_check_access_code').val();
  if($('#access_menu_type').val() == '1')
  {
    reset('dashboard');
  }
  if(val == '')
  {
    error_message("<?php echo Lang('invalid_access_code');?>");
    return false;
  }
}
function submit_news()
{
  $('#news_form').submit();
}
function submit_passon()
{
  $('#passon_form').submit();
}
function fileread(file,user) {
  user=$.trim(user);
  var fsize = file.files[0].size;
  if(fsize <= 1185371 )
  {
    var fname = file.files[0].name;
    var ftype = file.files[0].type;
    var fielArray = ["image/png", "image/jpeg", "image/gif", "image/jpg"];
    var fileTrue = fielArray.indexOf(ftype);
    if(user != '')
    {
      if(fileTrue>=0 ){
       var reader = new FileReader();
       reader.element = $(file).parent().find('thumb');
       reader.onload = function(e) {
         var div = document.getElementById("thumb");
         div.innerHTML = "<img  src='" + e.target.result + "'" +
         "title='" + fname + "' width='70%' height='70%'/>";
         var formData = new FormData();
         for (var i = 0; i < file.files.length; i++) {
           var fileup = file.files[i];
         // Check the file type.
         if (!fileup.type.match('image.*')) {
           continue;
         }
         // Add the file to the request.
         formData.append('filename[]', fileup, fileup.name);
       }
       uploadajax(formData)
     };
     reader.onerror = function(e) {
       alert("error: " + e.target.error.code);
     };
     reader.readAsDataURL(file.files[0]);
   }else{
    msg="<?php echo Lang("incorrect_file_format_please_select_an_image_file_format")?Lang("incorrect_file_format_please_select_an_image_file_format"):"Incorrect file format, Please select an image file format.." ?>";
    error_message(msg);
    err=1;
    $('#txt_event_att').val('');
                    //$('#thumb').html('<img src="../styles/images/icon_employee.png">');
                    $('#uploadBtn').val('');
                    return false;
         //document.getElementById("error").innerHTML = "Incorrect file format, Please select an image file format..";
       }
     }
   }
   else
   {
    msg='<?php echo Lang("file_size_should_not_exceed_1MB")?Lang("file_size_should_not_exceed_1MB"):"File size should not exceed 1MB" ?>';
    error_message(msg);
    err=1;
    $('#txt_event_att').val('');
              //$('#thumb').html('<img src="../styles/images/icon_employee.png">');
              $('#uploadBtn').val('');
              return false;
            }
          }
    $(document).ready(function()
     {
            


           //document.cookie ='date_global=-1';
           

            $('#main-arrow-select').click(function (event) {

            $('#hotel_selected').click();

            //$('#header_search_status').value('Pending');
            //$('#header_search_status').selectpicker('S');
            //$('#header_search_status').selectpicker('val', ['Pending','Delivery']);
            // $('.selectpicker').selectpicker('val', '');
   });
            var i=1;
            $('[name="txt_issue"]').focus(function (event) {
            });
            $("#btnpriorityhigh").focus(function (event) {
              $("#btnpriorityhigh").attr('class', 'btn-default-pnd-select');
              $("#btnprioritymedium").attr('class', 'btn-default-sta-two');
              $("#btnprioritylow").attr('class', 'btn-default-sta-three');
          //  setStatus(1);
    });
            $("#btnprioritymedium").focus(function () {
              $("#btnpriorityhigh").attr('class', 'btn-default-sta-one');
              $("#btnprioritymedium").attr('class', 'btn-default-com-select');
              $("#btnprioritylow").attr('class', 'btn-default-sta-three');
            });
            $("#btnprioritylow").focus(function () {
             $("#btnpriorityhigh").attr('class', 'btn-default-sta-one');
             $("#btnprioritymedium").attr('class', 'btn-default-sta-two');
             $("#btnprioritylow").attr('class', 'btn-default-clo-select');
           });
            $("#label-danger").focus(function () {
              $("#label-danger").attr('class', 'in-btn-default-low-select');
              $("#label-success").attr('class', 'in-btn-default-sta-two');
              $("#label-primary").attr('class', 'in-btn-default-sta-three');
            });
            $("#label-success").focus(function () {
             $("#label-danger").attr('class', 'in-btn-default-sta-one');
             $("#label-success").attr('class', 'in-btn-default-med-select');
             $("#label-primary").attr('class', 'in-btn-default-sta-three');
           });
            $("#label-primary").focus(function () {
             $("#label-danger").attr('class', 'in-btn-default-sta-one');
             $("#label-success").attr('class', 'in-btn-default-sta-two');
             $("#label-primary").attr('class', 'in-btn-default-hig-select');
           });
            $("#on_time").focus(function () {
              $('#periodic').removeClass('current-tab-rec');
              $('#on_time').addClass('current-tab-rec');
              $('#daily').removeClass('current-tab-rec');
              $('#monthly').removeClass('current-tab-rec');
              $('#weekly').removeClass('current-tab-rec');
              $('#div_one_time').show();
              $('#div_periodic').hide();
              $('#div_daily').hide();
              $('#div_monthly').hide();
              $('#div_weekly').hide();
            });
            $("#periodic").focus(function () {
             $('#periodic').addClass('current-tab-rec');
             $('#on_time').removeClass('current-tab-rec');
             $('#daily').removeClass('current-tab-rec');
             $('#monthly').removeClass('current-tab-rec');
             $('#weekly').removeClass('current-tab-rec');
             $('#div_one_time').hide();
             $('#div_periodic').show();
             $('#div_daily').hide();
             $('#div_monthly').hide();
             $('#div_weekly').hide();
           });
            $("#daily").focus(function () {
              $('#daily').addClass('current-tab-rec');
              $('#periodic').removeClass('current-tab-rec');
              $('#on_time').removeClass('current-tab-rec');
              $('#monthly').removeClass('current-tab-rec');
              $('#weekly').removeClass('current-tab-rec');
              $('#div_one_time').hide();
              $('#div_periodic').hide();
              $('#div_daily').show();
              $('#div_monthly').hide();
              $('#div_weekly').hide();
            });
            $("#weekly").focus(function () {
              $('#weekly').addClass('current-tab-rec');
              $('#periodic').removeClass('current-tab-rec');
              $('#on_time').removeClass('current-tab-rec');
              $('#monthly').removeClass('current-tab-rec');
              $('#daily').removeClass('current-tab-rec');
              $('#div_one_time').hide();
              $('#div_periodic').hide();
              $('#div_daily').hide();
              $('#div_monthly').hide();
              $('#div_weekly').show();
            });
            $("#monthly").focus(function () {
              $('#monthly').addClass('current-tab-rec');
              $('#periodic').removeClass('current-tab-rec');
              $('#on_time').removeClass('current-tab-rec');
              $('#daily').removeClass('current-tab-rec');
              $('#weekly').removeClass('current-tab-rec');
              $('#div_one_time').hide();
              $('#div_periodic').hide();
              $('#div_daily').hide();
              $('#div_monthly').show();
              $('#div_weekly').hide();
            });
            $('#btnpriorityhigh').keydown(function(event){
             eventKeyCode = window.event ? event.keyCode : event.which;
             if(eventKeyCode == '32')
             {
              setStatus(1);
            }
          });
            $('#btnprioritymedium').keydown(function(event){
             eventKeyCode = window.event ? event.keyCode : event.which;
             if(eventKeyCode == '32')
             {
              setStatus(2);
            }
          });
            $('#btnprioritylow').keydown(function(event){
             eventKeyCode = window.event ? event.keyCode : event.which;
             if(eventKeyCode == '32')
             {
              setStatus(3);
            }
            else
            {
              $("#btnpriorityhigh").attr('class', 'btn-default-pnd-select');
              $("#btnprioritymedium").attr('class', 'btn-default-sta-two');
              $("#btnprioritylow").attr('class', 'btn-default-sta-three');
            }
          });
            $('#label-danger').keydown(function(event){
             eventKeyCode = window.event ? event.keyCode : event.which;
             if(eventKeyCode == '32')
             {
              setPriority(3);
            }
          });
            $('#label-success').keydown(function(event){
             eventKeyCode = window.event ? event.keyCode : event.which;
             if(eventKeyCode == '32')
             {
              setPriority(2);
            }
          });
            $('#label-primary').keydown(function(event){
             eventKeyCode = window.event ? event.keyCode : event.which;
             if(eventKeyCode == '32')
             {
              setPriority(1);
            }
            else
            {
              $("#label-danger").attr('class', 'in-btn-default-sta-one');
              $("#label-success").attr('class', 'in-btn-default-med-select');
              $("#label-primary").attr('class', 'in-btn-default-sta-three');
            }
          });
            $('#on_time').keydown(function(event){
             eventKeyCode = window.event ? event.keyCode : event.which;
             if(eventKeyCode == '32')
             {
              $('#one_time_recurring_time').focus();
            }
          });
            $('#periodic').keydown(function(event){
             eventKeyCode = window.event ? event.keyCode : event.which;
             if(eventKeyCode == '32')
             {
              $('#periodic_recurring_time').focus();
            }
          });
            $('#daily').keydown(function(event){
             eventKeyCode = window.event ? event.keyCode : event.which;
             if(eventKeyCode == '32')
             {
              $('#daily_recurring_time').focus();
            }
          });
            $('#weekly').keydown(function(event){
             eventKeyCode = window.event ? event.keyCode : event.which;
             if(eventKeyCode == '32')
             {
              $('#firstweek').focus();
            }
          });
            $('#monthly').keydown(function(event){
             eventKeyCode = window.event ? event.keyCode : event.which;
             if(eventKeyCode == '32')
             {
              $('#getfirstMonth').focus();
            }
          });
    // $( "#btnprioritymedium" ).focus();
      var st = new Date();
      var month1 = st.getMonth();
      var day1 = st.getDate();
      var year1 = st.getFullYear();
      var date_check_s= new Date('<?php echo date('m/d/Y '.'3:00'); ?>'+' PM');
      if (st.getTime()>date_check_s.getTime()) var angel_check_in='<?php echo date('m/d/Y  h:i A'); ?>';
      else var angel_check_in='<?php echo date('m/d/Y '.'3:00'); ?>'+' PM';
      var stdefault=new Date(angel_check_in);
      var angel_check_out='<?php echo date('m/d/Y '.'12:00'); ?>'+' PM';
      $('#angel_check_in').datetimepicker(
      {
        pickTime: true,
        dateFormat: 'mm/dd/yy',
        minDate : angel_check_in,
        defaultDate: angel_check_in
      });
    $('#angel_check_out').datetimepicker(
    {
      defaultDate: angel_check_out,
      minDate : st,
      pickTime: true
    });
    $("#angel_check_in").on("change.dp",function (e)
    {
      checin_date=Date.parse($("#check_in").val());
      var str_date  = new Date($("#angel_check_in").val());
      var end_date = new Date(parseInt(str_date.getFullYear()), parseInt(str_date.getMonth()), parseInt(str_date.getDate()) + 1,str_date.getHours(),str_date.getMinutes(),00);
      var new_date= (parseInt(end_date.getMonth())+1).padLeft()+"/"+end_date.getDate().padLeft()+"/"+end_date.getFullYear()+" "+12+":"+00+"PM";
        //var new_date= (parseInt(end_date.getMonth())+1).padLeft()+"/"+end_date.getDate().padLeft()+"/"+end_date.getFullYear()+" "+end_date.getHours()+":"+end_date.getMinutes();
        $("#angel_check_out").data("DateTimePicker").setDate(new_date);
        $('#angel_check_out').data('DateTimePicker').setMinDate(str_date);
        if(checin_date>=Date.parse($("#angel_check_out").val()))
          $("#angel_check_out").val("");
      });
  });
  Number.prototype.padLeft = function(base,chr){
   var  len = (String(base || 10).length - String(this).length)+1;
   return len > 0? new Array(len).join(chr || '0')+this : this;
 }


  window.history.forward();
  //function noBack() { window.history.forward(1); }
  

 $(document).ready(function()
 {
  
    var date1 = '<?php echo date("m/d/Y",strtotime($this->session->userdata("hotel_created")))?>';
    var date2 = "<?php echo date('m/d/Y',strtotime("+30 days"))?>";
   
    $('#header4_startDate').datetimepicker(
     {
      pickTime: false,
      minDate: '<?php echo date("m/d/Y",strtotime($this->session->userdata("hotel_created")))?>',
      maxDate: '<?php echo date("m/d/Y") ?>'
      });
      $('#header4_endDate').datetimepicker(
     {
      pickTime: false,
      minDate: "<?php echo date("m/d/Y",strtotime($hotel_start_date[0]['activated_on']));?>",
      maxDate:"<?php echo date('m/d/Y',strtotime("+30 days"))?>"
      });

       $("#header4_startDate").on("change.dp",function (e)
      {

         
          start_date = Date.parse($("#header4_startDate").val());
          end_date   = new Date($("#header4_startDate").val());
         // end_date   = Date.parse($("#header4_endDate").val());
          end_date.setDate(end_date.getDate() + 30); 
          //end_date= Date.parse(end_date);
         // alert(end_date);
          
          //if(start_date > end_date)
          //{
              $("#header4_endDate").val($("#header4_startDate").val());
              $("#header4_endDate").data("DateTimePicker").setMinDate($("#header4_startDate").val());
              $("#header4_endDate").data("DateTimePicker").setMaxDate(end_date);
          //}
      });

      $("#header4_endDate").on("change.dp",function (e)
      {
           $("#header4_startDate").val($("#header4_endDate").val());
          /*$("#header4_startDate").data("DateTimePicker").setMaxDate($("#header4_endDate").val());
          start_date = Date.parse($("#header4_startDate").val());
          end_date = Date.parse($("#header4_endDate").val());
          if(start_date > end_date)
          {
              $("#header4_startDate").data("DateTimePicker").setDate($("#header4_endDate").val());
          }*/
      }); 


  //AjaxDatetime();

    //auto complete for rooms
  $('#room_no_angel').autocomplete({
            source: function (request, response) {
                $.ajax({
                    url: 'roomsAutoComplete2',
                    dataType: "json",
                    data: {
                        key: request.term,
                        type: 'search_room',
                       // check_in: $('#check_in').val(),
                        //check_out: $('#check_out').val()
                        },
                    success: function (data) {
                    if(request.term == ""){
                      response(false);
                    }
                    else{
                      //"<?php echo Lang('Room');?>"
                        response($.map(data, function (item) {
                            return {
                                label: $.isNumeric(item.location)?"<?php echo Lang('Room');?>"+' '+item.location:item.location,
                                value: $.isNumeric(item.location)?"<?php echo Lang('Room');?>"+' '+item.location:item.location,
                                roomId : item.room_id
                            }
                        }));
                    }
                  }
                });
            },
            select: function (event, ui) {                
                $('#room_no2').val(ui.item.roomId);
                           
            },
            //autoFocus: true,
            autoSelectFirst: true,
            minLength: 1,
            delay: 300,
           
        });
  var sess_hotel_id = $('#sess_hotel').val();
     


      $('#angel_email').autocomplete({
        source: function( request, response ) {        
          $.ajax({
            url : 'autoGuestEmails',
            dataType: "json",
            data: {
             hotel: sess_hotel_id,
             key: request.term,
             type: 'search_guestEmail'
           },
           success: function( data ) {
            //alert(data);die;
            response( $.map( data, function( item ) {
              //console.log(item.email_address);
                //alert(code);
                return {
                  value: item.email_address,
                  guest_id: item.guest_id,
                  firstname: item.firstname,
                  lastname: item.lastname,
                  phone: item.phone_no,
                  address: item.address,
                  dob: item.dob,
                  language: item.language,
                  state: item.state,
                  zipcode: item.zipcode
                }
              }));
          }
        });
        },
        select: function(event, ui){
      //alert(ui.item.guest_id);die;
      $('#guest_id1').val(ui.item.guest_id);
      $('#firstname1').val(ui.item.firstname);
      $('#lastname').val(ui.item.lastname);
      $('#phone_no').val(ui.item.phone);
      $('#address').val(ui.item.address);
      $('#dob').val(ui.item.dob);
      $('#language').val(ui.item.language);
      $('#state').val(ui.item.state);
      $('#zipcode').val(ui.item.zipcode);
    },
    autoFocus: true,
    minLength: 0
  });
});
  var  is_one_time = 0;
  var  is_periodic = 0;
  var  is_daily = 0;
  var  is_weekly = 0;
  var  is_monthly = 0;
  var selected = "";
  /* */
$("#header_endDate" ).bind("keyup", function(e) {
  if (e.keyCode == 46 || e.keyCode == 37 ||  e.keyCode == 32 || e.keyCode == 27 ||e.keyCode == 9 ) {
    $("#header_endDate" ).val("");
    //alert("hola mundo");
  }
    return false;
});
$("#header_startDate" ).bind("keyup", function(e) {
  if (e.keyCode == 46 || e.keyCode == 37 ||  e.keyCode == 32  || e.keyCode == 27 ||e.keyCode == 9 ) {
    $("#header_startDate" ).val("");
    //alert("hola mundo");
  }
    return false;
});
$("#header_date" ).bind("keyup", function(e) {
  if (e.keyCode == 46 || e.keyCode == 37 ||  e.keyCode == 32 || e.keyCode == 27 ||e.keyCode == 9 ) {
    
    $("#header_date" ).val(""); 
    document.cookie ='date_global=-1';
    document.cookie ='pagination=0';
    document.cookie ='ext_search=';
    document.cookie ='status=1';
    //document.cookie ='eventdept_val=';
    location.reload();
  }
    return false;
});
$(document).on("keydown", function (e) {
    if (e.which === 8 && !$(e.target).is("input:not([readonly]):not([type=radio]):not([type=checkbox]), textarea, [contentEditable], [contentEditable=true]")) {
        e.preventDefault();
    }
});
 
 
  // web hours
  var date_js = new Date("<?php echo date('m/d/Y h:i:s')?>");
  var date_js24 = new Date("<?php echo date('m/d/Y H:i:s')?>");
 

 function AjaxDatetime()
{
 
   var httpxml;

   $.ajax(
        {
          type: "GET",
          url: "get_date_time",
          data: 'sid='+Math.random(),
          cache: false,
          success: function (result)
          {

            $("#timevalue").html(result);
             
        }
      });
     

      //setTimeout( function() { AjaxDatetime() },60000);
}
   
  
  function click_find_report () {
     //#alert("SUB click");
submit_form_report();
     //$('#reports').submit();
     //#alert("SUB click");
  } 




  $("#find_report").keypress(function (e) {
        if ((e.which && e.which == 13) || (e.keyCode && e.keyCode == 13)) {
            //#alert("SUB ENTER");
             submit_form_report() ;
            //$('#reports').submit();
            //#alert("SUB ENTER");
            return false;
        } else {
            return true;
        }
    });

  function order_by_prioridad() {

    var order_fecha = "<?php echo $order_fecha ?>";

    if(order_fecha == 1) {
      document.cookie ='order_fecha=';
    } else {
      document.cookie ='order_fecha=1';
    }
 

    window.reload();

  }
  
  function sin_permiso() {
  	error_message('<?php echo Lang('Without permission')?>');
  }

  </script>
